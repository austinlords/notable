{"version":3,"sources":["config.js","components/LoadingScreen.jsx","services/httpService.js","services/auth.js","context/AppContext.js","components/NavBar.jsx","components/common/CollectionPreview.jsx","utils/randomColor.js","components/EditorCollections.jsx","components/common/TagsPreview.jsx","components/EditorTags.jsx","components/EditorMenu.jsx","components/DraftEditor.jsx","utils/truncate.js","components/NotesPreview.jsx","components/NotesFilter.jsx","components/SideBar.jsx","services/notesService.js","services/collectionsService.js","services/demoNotesService.js","services/demoCollectionsService.js","components/Notes.jsx","components/Login/Login.jsx","components/Login/Register.jsx","App.js","index.js"],"names":["module","exports","apiUrl","notesPreviewLength","LoadingScreen","style","width","height","background","display","margin","alignContent","justifyItems","className","textAlign","httpGet","urlPath","a","fetch","method","headers","localStorage","getItem","credentials","response","json","resBody","ok","Error","message","setItem","get","console","log","error","httpPost","body","httpPut","httpDelete","logout","removeItem","validateUser","login","email","password","JSON","stringify","trim","toLowerCase","register","React","createContext","NavBar","app","useContext","AppContext","updateUser","toast","success","position","POSITION","BOTTOM_RIGHT","to","user","onClick","color","CollectionPreview","fontSize","collection","len","length","colStr","hasOwnProperty","name","slice","linkStyle","fontStyle","cursor","icon","faBook","marginRight","transform","randomColor","Math","random","toString","substr","EditorCollections","state","collectionPopoverOpen","newCollection","onChange","event","setState","target","value","togglePopover","handleCollectionSelect","note","props","selectedNote","currentTarget","getAttribute","save","collections","find","c","_id","pressEnter","keyCode","Date","now","title","content","convertToRaw","editorState","getCurrentContent","tags","filter","this","padding","id","UncontrolledPopover","placement","isOpen","trigger","toggle","PopoverHeader","PopoverBody","key","map","type","checked","e","data","faMinusCircle","placeholder","marginTop","lineHeight","onKeyDown","Component","TagsPreview","iconColor","tagLen","tagsStr","join","faTags","EditorTags","tagsPopoverOpen","newTag","handleTagsDelete","tag","t","includes","push","autoFocus","EditorMenu","menuStyle","justifyContent","crudStyle","alignItems","metaDataStyle","handleDelete","aria-hidden","DraftEditor","handleTitle","updateSelectedNote","currentEditorContent","controlsStyle","fontFamily","verticalLine","borderRight","focus","editor","handleKeyCommand","_handleKeyCommand","bind","toggleBlockType","_toggleBlockType","toggleInlineStyle","_toggleInlineStyle","command","newState","RichUtils","onEditorChange","blockType","inlineStyle","onToggle","blockStyleFn","getBlockStyle","customStyleMap","styleMap","keyBindingFn","mapKeyToEditorCommand","ref","spellCheck","CODE","backgroundColor","block","getType","StyleButton","preventDefault","active","onMouseDown","label","BLOCK_TYPES","BlockStyleControls","selection","getSelection","getBlockForKey","getStartKey","INLINE_STYLES","InlineStyleControls","currentStyle","getCurrentInlineStyle","has","word","substring","NotesPreview","listItemStyle","previewStyle","tagsStyle","marginLeft","collectionStyle","borderRadius","writingMode","fontWeight","individualNotes","gridTemplateColumns","marginBottom","filterNotes","notes","searchQuery","search","n","blocks","el","text","generateSearchPreview","previewText","startIndex","indexOf","endIndex","previewLength","config","pre","highlight","post","generateTitle","filtered","allNotes","selectedId","onSearch","onClear","index","truncate","moment","updated","format","NotesFilter","editMode","collectionsToEdit","toggleEditMode","currentCollections","forEach","updateCollections","handleCollectionDelete","collectionId","handleCollectionEdit","collectionToUpdate","splice","handleColorChange","colorChange","hex","filterStyle","gridTemplateRows","overflow","handleRadioSelect","handleCheckboxSelect","collectionFilter","tagsFilter","Profile","profileDivStyle","profileContentStyle","Consumer","faUserCircle","Buttons","useState","popoverOpen","setNewCollection","buttonStyle","faPlus","faCheckCircle","faEdit","collectionTagStyle","dropdownTitle","CollectionFilter","dropdownOpen","setDropdownOpen","data-toggle","data-target","aria-expanded","aria-controls","faCaretDown","faCaretRight","paddingLeft","textShadow","TagFilter","EditCollections","i","aria-label","EditColor","colors","setColors","newColor","setNewColor","swatchStyle","OverlayTrigger","rootClose","overlay","Popover","border","Title","Content","maxLength","left","faFillDrip","SideBar","sidebarStyle","tagsOpen","handleDropdownClick","dataTarget","isExpanded","collectionsOpen","selectedTags","newTags","filteredNotes","Set","lowerTags","combinedTags","sort","getNotes","col","postNote","putNote","deleteNote","getCollections","postCollection","putCollection","deleteCollection","DEMONOTES","depth","inlineStyleRanges","offset","entityRanges","entityMap","DEMOCOLLECTIONS","Notes","handleSearch","query","handleClear","action","indexToUpdate","findIndex","notesToChange","newNote","updatedNote","oldNote","match","params","Object","create","existingIndex","isNewCollection","savedNote","redirectId","history","replace","EditorState","createEmpty","errors","NOTES","COLLECTIONS","createWithContent","convertFromRaw","prevProps","Login","setEmail","setPassword","handleLogin","newUser","onSubmit","aria-describedby","required","minLength","form","Register","handleRegister","App","receivedAsyncData","Fragment","Provider","path","render","from","exact","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ce03d1b2.chunk.js","sourcesContent":["module.exports = {\r\n  apiUrl: \"https://notes-notable.herokuapp.com/api/\",\r\n  notesPreviewLength: 75\r\n};\r\n","import React from \"react\";\r\n\r\nconst LoadingScreen = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        background: \"#eee\",\r\n        display: \"flex\"\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          margin: \"auto\",\r\n          alignContent: \"center\",\r\n          justifyItems: \"center\"\r\n        }}\r\n      >\r\n        <div className=\"loader\"></div>\r\n        <div style={{ textAlign: \"center\", margin: \"10px auto\" }}>\r\n          loading...{\" \"}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingScreen;\r\n","export const httpGet = async urlPath => {\r\n  try {\r\n    const response = await fetch(urlPath, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth\": localStorage.getItem(\"notable-token\")\r\n      },\r\n      credentials: \"include\"\r\n    });\r\n\r\n    const resBody = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(resBody.message);\r\n    }\r\n\r\n    localStorage.setItem(\"notable-token\", response.headers.get(\"x-auth\"));\r\n\r\n    return resBody;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return { message: error.message, error: true };\r\n  }\r\n};\r\n\r\nexport const httpPost = async (urlPath, body) => {\r\n  try {\r\n    const response = await fetch(urlPath, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth\": localStorage.getItem(\"notable-token\")\r\n      },\r\n      credentials: \"include\",\r\n      body\r\n    });\r\n\r\n    let resBody = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(resBody.message);\r\n    }\r\n\r\n    localStorage.setItem(\"notable-token\", response.headers.get(\"x-auth\"));\r\n\r\n    return resBody;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return { message: error.message, error: true };\r\n  }\r\n};\r\n\r\nexport const httpPut = async (urlPath, body) => {\r\n  try {\r\n    const response = await fetch(urlPath, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth\": localStorage.getItem(\"notable-token\")\r\n      },\r\n      credentials: \"include\",\r\n      body\r\n    });\r\n\r\n    const resBody = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(resBody.message);\r\n    }\r\n\r\n    localStorage.setItem(\"notable-token\", response.headers.get(\"x-auth\"));\r\n\r\n    return resBody;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return { message: error.message, error: true };\r\n  }\r\n};\r\n\r\nexport const httpDelete = async urlPath => {\r\n  try {\r\n    const response = await fetch(urlPath, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth\": localStorage.getItem(\"notable-token\")\r\n      },\r\n      credentials: \"include\"\r\n    });\r\n\r\n    const resBody = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(resBody.message);\r\n    }\r\n\r\n    localStorage.setItem(\"notable-token\", response.headers.get(\"x-auth\"));\r\n\r\n    return resBody;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return { message: error.message, error: true };\r\n  }\r\n};\r\n","import { apiUrl } from \"../config\";\r\nimport { httpGet, httpPost } from \"../services/httpService\";\r\n\r\nexport const logout = async () => {\r\n  const response = await httpPost(apiUrl + \"logout\");\r\n  localStorage.removeItem(\"notable-token\");\r\n  return response.message;\r\n};\r\n\r\nexport const validateUser = async () => {\r\n  const response = await httpGet(apiUrl + \"user\");\r\n  if (response.error) return null;\r\n  return response;\r\n};\r\n\r\nexport const login = async (email, password) => {\r\n  const response = await httpPost(\r\n    apiUrl + \"login\",\r\n    JSON.stringify({\r\n      email: email.trim().toLowerCase(),\r\n      password: password.trim()\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response;\r\n};\r\n\r\nexport const register = async (email, password) => {\r\n  const response = await httpPost(\r\n    apiUrl + \"register\",\r\n    JSON.stringify({\r\n      email: email.trim().toLowerCase(),\r\n      password: password.trim()\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response;\r\n};\r\n","import React from \"react\";\r\n\r\nexport default React.createContext({});\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { logout } from \"../services/auth\";\r\nimport { toast } from \"react-toastify\";\r\nimport AppContext from \"../context/AppContext\";\r\n\r\nconst NavBar = () => {\r\n  const app = useContext(AppContext);\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      const message = await logout();\r\n      app.updateUser(null);\r\n      toast.success(message, {\r\n        position: toast.POSITION.BOTTOM_RIGHT\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Could not logout. Unexpected error: \" + error.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-navbar\">\r\n      <Link className=\"navbar-brand\" to=\"/\">\r\n        Notable\r\n      </Link>\r\n\r\n      <div className=\"\">\r\n        {app.user ? (\r\n          <div>\r\n            <span\r\n              className=\"navBar-link clickable\"\r\n              onClick={handleLogout}\r\n              style={{ color: \"orange\" }}\r\n            >\r\n              Logout\r\n            </span>\r\n          </div>\r\n        ) : (\r\n          <Link to=\"/login\">Login</Link>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBook } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst CollectionPreview = ({ fontSize, collection, style, length }) => {\r\n  let len = length || 20;\r\n  let colStr = collection.hasOwnProperty(\"name\")\r\n    ? collection.name\r\n    : \"(collection)\";\r\n\r\n  if (colStr.length > len) colStr = colStr.slice(0, len) + \"...\";\r\n\r\n  const linkStyle = {\r\n    color: \"blue\",\r\n    fontStyle: \"italic\",\r\n    cursor: \"pointer\",\r\n    fontSize\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...linkStyle, ...style }}>\r\n      <FontAwesomeIcon\r\n        icon={faBook}\r\n        style={{\r\n          color: \"black\",\r\n          marginRight: \"10px\",\r\n          transform: \"rotate(-20deg)\"\r\n        }}\r\n      />\r\n      <span>{colStr}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollectionPreview;\r\n","export default function randomColor() {\r\n  return (\r\n    \"#\" +\r\n    Math.random()\r\n      .toString(16)\r\n      .substr(-6)\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { convertToRaw } from \"draft-js\";\r\nimport { UncontrolledPopover, PopoverBody, PopoverHeader } from \"reactstrap\";\r\nimport CollectionPreview from \"./common/CollectionPreview\";\r\nimport randomColor from \"./../utils/randomColor\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nclass EditorCollections extends Component {\r\n  state = {\r\n    collectionPopoverOpen: false,\r\n    newCollection: \"\"\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ newCollection: event.target.value.toLowerCase() });\r\n  };\r\n\r\n  togglePopover = () => {\r\n    this.setState({\r\n      collectionPopoverOpen: !this.state.collectionPopoverOpen\r\n    });\r\n  };\r\n\r\n  handleCollectionSelect = event => {\r\n    const note = { ...this.props.selectedNote };\r\n\r\n    if (event.currentTarget.getAttribute(\"data\") === \"delete\") {\r\n      note.collection = {};\r\n      this.props.save(note);\r\n    } else {\r\n      let { color, _id, name } = this.props.collections.find(\r\n        c => c._id === event.target.value\r\n      );\r\n      note.collection = { _id, name, color };\r\n      this.props.save(note);\r\n    }\r\n  };\r\n\r\n  pressEnter = event => {\r\n    if (event.keyCode !== 13) return;\r\n\r\n    let note = this.props.selectedNote\r\n      ? { ...this.props.selectedNote }\r\n      : {\r\n          _id: Date.now().toString(),\r\n          title: \"\",\r\n          content: convertToRaw(this.props.editorState.getCurrentContent()),\r\n          tags: [],\r\n          collection: {}\r\n        };\r\n    // don't allow duplicate collections\r\n    const newCollection = this.state.newCollection.toLowerCase().trim();\r\n\r\n    const collectionAlreadyExists = !!this.props.collections.filter(\r\n      c => c.name === newCollection\r\n    ).length;\r\n    if (collectionAlreadyExists) return;\r\n\r\n    note.collection = {\r\n      _id: Date.now().toString(),\r\n      name: newCollection,\r\n      color: randomColor()\r\n    };\r\n    this.setState({ newCollection: \"\" });\r\n    this.props.save(note);\r\n  };\r\n\r\n  render() {\r\n    const { selectedNote, collections } = this.props;\r\n\r\n    return (\r\n      <div\r\n        style={{ textAlign: \"right\", padding: \"0px 10px\" }}\r\n        id=\"collection-popover-link\"\r\n        className=\"link-no-underline\"\r\n      >\r\n        <CollectionPreview\r\n          fontSize=\"12px\"\r\n          collection={selectedNote ? selectedNote.collection : {}}\r\n        />\r\n        <UncontrolledPopover\r\n          placement=\"bottom\"\r\n          isOpen={this.state.collectionPopoverOpen}\r\n          target=\"collection-popover-link\"\r\n          trigger=\"legacy\"\r\n          toggle={() => this.togglePopover()}\r\n        >\r\n          <PopoverHeader>select collection:</PopoverHeader>\r\n          <PopoverBody key={selectedNote ? selectedNote.collection.name : \"\"}>\r\n            {collections ? (\r\n              collections.map(c => (\r\n                <div className=\"form-check clickable\" key={c._id}>\r\n                  <label className=\"form-check-label\">\r\n                    <input\r\n                      className=\"form-check-input\"\r\n                      type=\"radio\"\r\n                      name=\"select-collection-choices\"\r\n                      value={c._id}\r\n                      checked={\r\n                        selectedNote\r\n                          ? selectedNote.collection.name === c.name\r\n                          : false\r\n                      }\r\n                      onChange={e => this.handleCollectionSelect(e)}\r\n                    />\r\n                    {c.name}\r\n                  </label>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n            {collections.length > 0 &&\r\n            selectedNote &&\r\n            selectedNote.collection.hasOwnProperty(\"_id\") ? (\r\n              <div\r\n                className=\"clickable\"\r\n                style={{ color: \"red\" }}\r\n                onClick={e => this.handleCollectionSelect(e)}\r\n                data=\"delete\"\r\n              >\r\n                <FontAwesomeIcon icon={faMinusCircle} />{\" \"}\r\n                <span>\r\n                  <em>clear collection</em>\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={this.state.newCollection}\r\n              onChange={e => this.onChange(e)}\r\n              placeholder=\"new collection...\"\r\n              style={{\r\n                fontSize: \".9rem\",\r\n                marginTop: \"10px\",\r\n                lineHeight: \"1\",\r\n                padding: \"0px .75rem\",\r\n                width: \"150px\",\r\n                height: \"calc(2rem + 2px)\"\r\n              }}\r\n              onKeyDown={this.pressEnter}\r\n            />\r\n            <small>\r\n              <em>press Enter to save</em>\r\n            </small>{\" \"}\r\n          </PopoverBody>\r\n        </UncontrolledPopover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorCollections;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTags } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst TagsPreview = ({ fontSize, tags, style, length, iconColor }) => {\r\n  let tagLen = length || 40;\r\n  let tagsStr = tags.length > 0 ? tags.join(\", \") : \"(tags)\";\r\n\r\n  if (tagsStr.length > tagLen) tagsStr = tagsStr.slice(0, tagLen) + \"...\";\r\n\r\n  const linkStyle = {\r\n    color: \"orangered\",\r\n    fontStyle: \"italic\",\r\n    cursor: \"pointer\",\r\n    fontSize\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...linkStyle, ...style }}>\r\n      <FontAwesomeIcon\r\n        icon={faTags}\r\n        style={{ color: iconColor, marginRight: \"10px\" }}\r\n      />\r\n      <span>{tagsStr}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagsPreview;\r\n","import React, { Component } from \"react\";\r\nimport { convertToRaw } from \"draft-js\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { UncontrolledPopover, PopoverBody, PopoverHeader } from \"reactstrap\";\r\nimport TagsPreview from \"./common/TagsPreview\";\r\n\r\nclass EditorTags extends Component {\r\n  state = { tagsPopoverOpen: false, newTag: \"\" };\r\n\r\n  togglePopover = () => {\r\n    this.setState({ tagsPopoverOpen: !this.state.tagsPopoverOpen });\r\n  };\r\n\r\n  handleTagsDelete = event => {\r\n    const tag = event.currentTarget.getAttribute(\"data\");\r\n    let note = { ...this.props.selectedNote };\r\n    note.tags = note.tags.filter(t => t !== tag);\r\n    this.props.save(note);\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ newTag: event.target.value.toLowerCase() });\r\n  };\r\n\r\n  pressEnter = event => {\r\n    if (event.keyCode !== 13) return;\r\n\r\n    const newTag = this.state.newTag.toLowerCase().trim();\r\n\r\n    let note = this.props.selectedNote\r\n      ? { ...this.props.selectedNote }\r\n      : {\r\n          _id: Date.now().toString(),\r\n          title: \"\",\r\n          content: convertToRaw(this.props.editorState.getCurrentContent()),\r\n          tags: [],\r\n          collection: {}\r\n        };\r\n    // don't allow duplicate tags\r\n    if (note.tags.includes(newTag)) return;\r\n\r\n    // do not directly modify this.props.selectedNote.tags with push method\r\n    note.tags = [...note.tags];\r\n\r\n    note.tags.push(newTag);\r\n    this.props.save(note);\r\n    this.setState({ newTag: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { selectedNote } = this.props;\r\n\r\n    return (\r\n      <div\r\n        style={{ textAlign: \"right\", padding: \"0px 10px\" }}\r\n        id=\"tags-popover-link\"\r\n      >\r\n        <TagsPreview\r\n          fontSize=\"12px\"\r\n          tags={selectedNote ? selectedNote.tags : {}}\r\n          iconColor=\"black\"\r\n        />\r\n        <UncontrolledPopover\r\n          placement=\"bottom\"\r\n          isOpen={this.state.tagsPopoverOpen}\r\n          target=\"tags-popover-link\"\r\n          trigger=\"legacy\"\r\n          toggle={() => this.togglePopover()}\r\n        >\r\n          <PopoverHeader>edit tags:</PopoverHeader>\r\n          <PopoverBody key={selectedNote ? selectedNote.tags.length : 0}>\r\n            {selectedNote ? (\r\n              selectedNote.tags.map(tag => (\r\n                <div key={tag}>\r\n                  <span data={tag} onClick={e => this.handleTagsDelete(e)}>\r\n                    <FontAwesomeIcon\r\n                      icon={faMinusCircle}\r\n                      style={{ color: \"red\", marginRight: \"10px\" }}\r\n                    />\r\n                  </span>\r\n                  <label className=\"form-check-label\">{tag}</label>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={this.state.newTag}\r\n              onChange={e => this.onChange(e)}\r\n              placeholder=\"new tag...\"\r\n              style={{\r\n                fontSize: \".9rem\",\r\n                lineHeight: \"1\",\r\n                padding: \"0px .75rem\",\r\n                marginTop: \"10px\",\r\n                width: \"150px\",\r\n                height: \"calc(2rem + 2px)\"\r\n              }}\r\n              onKeyDown={this.pressEnter}\r\n              autoFocus\r\n            />\r\n            <small>\r\n              <em>press Enter to save</em>\r\n            </small>\r\n          </PopoverBody>\r\n        </UncontrolledPopover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorTags;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport EditorCollections from \"./EditorCollections\";\r\nimport EditorTags from \"./EditorTags\";\r\n\r\nclass EditorMenu extends Component {\r\n  state = {};\r\n\r\n  menuStyle = {\r\n    margin: \"auto\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    display: \"inline-flex\",\r\n    justifyContent: \"space-between\"\r\n  };\r\n\r\n  crudStyle = {\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    width: \"200px\",\r\n    height: \"100%\",\r\n    fontSize: \"12px\"\r\n  };\r\n\r\n  metaDataStyle = {\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    height: \"100%\",\r\n    fontSize: \"12px\"\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      save,\r\n      handleDelete,\r\n      selectedNote,\r\n      collections,\r\n      editorState\r\n    } = this.props;\r\n\r\n    return (\r\n      <div style={this.menuStyle}>\r\n        <div id=\"crud-operations\" style={this.crudStyle}>\r\n          <Link to=\"/notes/new\">\r\n            <div className=\"clickable editor-menu-option\">\r\n              <i className=\"fa fa-plus\" aria-hidden=\"true\" />\r\n              <span> New Note</span>\r\n            </div>\r\n          </Link>\r\n          <div className=\"clickable editor-menu-option\" onClick={handleDelete}>\r\n            <i className=\"fa fa-trash\" aria-hidden=\"true\" />\r\n            <span> Delete</span>\r\n          </div>\r\n          <div\r\n            className=\"clickable editor-menu-option\"\r\n            onClick={() => save(selectedNote)}\r\n          >\r\n            <i className=\"fa fa-floppy-o\" aria-hidden=\"true\" />\r\n            <span> Save</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"notes-meta-data\" style={this.metaDataStyle}>\r\n          <EditorCollections\r\n            selectedNote={selectedNote}\r\n            collections={collections}\r\n            save={save}\r\n            editorState={editorState}\r\n          />\r\n          <EditorTags\r\n            selectedNote={selectedNote}\r\n            save={save}\r\n            editorState={editorState}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorMenu;\r\n","import React from \"react\";\r\nimport { Editor, RichUtils, convertToRaw } from \"draft-js\";\r\nimport Textarea from \"react-expanding-textarea\";\r\nimport EditorMenu from \"./EditorMenu\";\r\nimport \"../css/notes.css\";\r\nimport \"draft-js/dist/Draft.css\";\r\n\r\nclass DraftEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.focus = () => this.editor.focus();\r\n\r\n    this.handleKeyCommand = this._handleKeyCommand.bind(this);\r\n    this.toggleBlockType = this._toggleBlockType.bind(this);\r\n    this.toggleInlineStyle = this._toggleInlineStyle.bind(this);\r\n  }\r\n\r\n  handleTitle = title => {\r\n    if (this.props.selectedNote) {\r\n      const note = { ...this.props.selectedNote };\r\n      note.title = title;\r\n      return this.props.updateSelectedNote(note);\r\n    } else {\r\n      const currentEditorContent = convertToRaw(\r\n        this.props.editorState.getCurrentContent()\r\n      );\r\n      const note = {\r\n        _id: Date.now().toString(),\r\n        title: title,\r\n        content: currentEditorContent,\r\n        tags: [],\r\n        collection: {}\r\n      };\r\n      return this.props.updateSelectedNote(note);\r\n    }\r\n  };\r\n\r\n  _handleKeyCommand(command, editorState) {\r\n    const newState = RichUtils.handleKeyCommand(editorState, command);\r\n    if (newState) {\r\n      this.props.onEditorChange(newState);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _toggleBlockType(blockType) {\r\n    this.props.onEditorChange(\r\n      RichUtils.toggleBlockType(this.props.editorState, blockType)\r\n    );\r\n  }\r\n\r\n  _toggleInlineStyle(inlineStyle) {\r\n    this.props.onEditorChange(\r\n      RichUtils.toggleInlineStyle(this.props.editorState, inlineStyle)\r\n    );\r\n  }\r\n\r\n  controlsStyle = {\r\n    display: \"inline-flex\",\r\n    fontFamily: \"Arial, Helvetica, sans-serif\",\r\n    fontSize: \"14px\",\r\n    margin: \"auto 0px\"\r\n  };\r\n\r\n  verticalLine = {\r\n    width: \"1px\",\r\n    height: \"20px\",\r\n    borderRight: \"1px solid grey\",\r\n    margin: \"auto 5px\"\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"editor-window\">\r\n        <div className=\"editor-menu\">\r\n          <EditorMenu\r\n            save={this.props.save}\r\n            handleDelete={this.props.handleDelete}\r\n            selectedNote={this.props.selectedNote}\r\n            collections={this.props.collections}\r\n            updateSelectedNote={this.props.updateSelectedNote}\r\n            editorState={this.props.editorState}\r\n          />\r\n          <div id=\"stying-controls\" style={this.controlsStyle}>\r\n            <InlineStyleControls\r\n              editorState={this.props.editorState}\r\n              onToggle={this.toggleInlineStyle}\r\n            />\r\n            <div style={this.verticalLine}></div>\r\n            <BlockStyleControls\r\n              editorState={this.props.editorState}\r\n              onToggle={this.toggleBlockType}\r\n            />\r\n            <hr></hr>\r\n          </div>\r\n        </div>\r\n        <div id=\"rich-text-editor\">\r\n          <div>\r\n            <Textarea\r\n              className=\"textarea\"\r\n              id=\"title-textarea\"\r\n              placeholder=\"Title...\"\r\n              value={\r\n                this.props.selectedNote ? this.props.selectedNote.title : \"\"\r\n              }\r\n              onChange={e => this.handleTitle(e.target.value)}\r\n            />\r\n            <hr></hr>\r\n          </div>\r\n          <div className=\"editor-edit\" onClick={this.focus}>\r\n            <Editor\r\n              blockStyleFn={getBlockStyle}\r\n              customStyleMap={styleMap}\r\n              editorState={this.props.editorState}\r\n              handleKeyCommand={this.handleKeyCommand}\r\n              keyBindingFn={this.mapKeyToEditorCommand}\r\n              onChange={this.props.onEditorChange}\r\n              ref={ref => (this.editor = ref)}\r\n              spellCheck={true}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Custom overrides for \"code\" style.\r\nconst styleMap = {\r\n  CODE: {\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\r\n    fontSize: 16,\r\n    padding: 2\r\n  }\r\n};\r\n\r\nfunction getBlockStyle(block) {\r\n  switch (block.getType()) {\r\n    case \"blockquote\":\r\n      return \"RichEditor-blockquote\";\r\n    case \"code-block\":\r\n      return \"editor-code\";\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nclass StyleButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onToggle = e => {\r\n      e.preventDefault();\r\n      props.onToggle(props.style);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let className = \"editor-styleButton\";\r\n    if (this.props.active) {\r\n      className += \" editor-activeButton\";\r\n    }\r\n\r\n    return (\r\n      <span className={className} onMouseDown={this.onToggle}>\r\n        {this.props.label}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nconst BLOCK_TYPES = [\r\n  { label: \"Title\", style: \"header-one\" },\r\n  { label: \"Header\", style: \"header-three\" },\r\n  {\r\n    label: <i className=\"fa fa-list-ul\" aria-hidden=\"true\"></i>,\r\n    style: \"unordered-list-item\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-list-ol\" aria-hidden=\"true\"></i>,\r\n    style: \"ordered-list-item\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-code\" aria-hidden=\"true\"></i>,\r\n    style: \"code-block\"\r\n  }\r\n];\r\n\r\nconst BlockStyleControls = ({ editorState, onToggle }) => {\r\n  const selection = editorState.getSelection();\r\n  const blockType = editorState\r\n    .getCurrentContent()\r\n    .getBlockForKey(selection.getStartKey())\r\n    .getType();\r\n\r\n  return (\r\n    <div className=\"editor-control-row\">\r\n      {BLOCK_TYPES.map(type => (\r\n        <StyleButton\r\n          key={type.style}\r\n          active={type.style === blockType}\r\n          label={type.label}\r\n          onToggle={onToggle}\r\n          style={type.style}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nvar INLINE_STYLES = [\r\n  { label: <i className=\"fa fa-bold\" aria-hidden=\"true\"></i>, style: \"BOLD\" },\r\n  {\r\n    label: <i className=\"fa fa-italic\" aria-hidden=\"true\"></i>,\r\n    style: \"ITALIC\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-underline\" aria-hidden=\"true\"></i>,\r\n    style: \"UNDERLINE\"\r\n  },\r\n  { label: \"Monospace\", style: \"CODE\" }\r\n];\r\n\r\nconst InlineStyleControls = ({ editorState, onToggle }) => {\r\n  var currentStyle = editorState.getCurrentInlineStyle();\r\n  return (\r\n    <div className=\"editor-control-row\">\r\n      {INLINE_STYLES.map(type => (\r\n        <StyleButton\r\n          key={type.style}\r\n          active={currentStyle.has(type.style)}\r\n          label={type.label}\r\n          onToggle={onToggle}\r\n          style={type.style}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraftEditor;\r\n","export default function(word, length) {\r\n  if (!word) return;\r\n  if (word.length < length) return word;\r\n\r\n  return word.substring(0, length - 2) + \"...\";\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport TagsPreview from \"./common/TagsPreview\";\r\nimport config from \"../config\";\r\nimport truncate from \"../utils/truncate\";\r\n\r\nclass NotesPreview extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  listItemStyle = {\r\n    padding: \"0.5em 0.75em\",\r\n    background: \"white\"\r\n  };\r\n\r\n  previewStyle = {\r\n    fontSize: 12,\r\n    margin: \"3px 0px\",\r\n    lineHeight: 1.25\r\n  };\r\n\r\n  tagsStyle = {\r\n    fontSize: 11,\r\n    fontStyle: \"italic\",\r\n    marginLeft: \"5px\",\r\n    color: \"orangered\"\r\n  };\r\n\r\n  collectionStyle = {\r\n    margin: \"5px 5px 5px 0px\",\r\n    borderRadius: \"0 8px 8px 0\",\r\n    writingMode: \"vertical-rl\",\r\n    textAlign: \"center\",\r\n    fontSize: \"12px\",\r\n    fontWeight: \"bold\",\r\n    fontStyle: \"italic\"\r\n  };\r\n\r\n  individualNotes = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"20px auto\",\r\n    width: \"100%\",\r\n    padding: \"1px\",\r\n    marginBottom: \"0px\"\r\n  };\r\n\r\n  filterNotes = notes => {\r\n    if (!this.props.searchQuery) return notes;\r\n    if (!notes) return [];\r\n    let search = this.props.searchQuery.toLowerCase();\r\n\r\n    if (notes)\r\n      return notes.filter(\r\n        n =>\r\n          n.content.blocks.find(el => el.text.toLowerCase().includes(search)) ||\r\n          n.title.toLowerCase().includes(search)\r\n      );\r\n  };\r\n\r\n  generateSearchPreview = note => {\r\n    let searchQuery = this.props.searchQuery;\r\n\r\n    let previewText = note.content.blocks.map(n => n.text).join(\" \");\r\n    let startIndex = previewText\r\n      .toLowerCase()\r\n      .indexOf(searchQuery.toLowerCase());\r\n\r\n    if (startIndex === -1) return <div>{previewText}</div>;\r\n    let endIndex = startIndex + searchQuery.length;\r\n\r\n    const preLength = 20;\r\n    const previewLength = config.notesPreviewLength;\r\n\r\n    let pre = previewText.slice(0, startIndex);\r\n    let highlight = previewText.slice(startIndex, endIndex);\r\n    let post = previewText.slice(endIndex);\r\n\r\n    if (previewText.length > previewLength) {\r\n      if (pre.length >= previewLength + searchQuery.length + 3)\r\n        pre = pre.slice(pre.length - preLength);\r\n      if (post.length > previewLength - searchQuery.length - pre.length)\r\n        post = post.slice(0, previewLength - pre.length);\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <span>{pre}</span>\r\n        <span style={{ backgroundColor: \"yellow\" }}>{highlight}</span>\r\n        <span>{post}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  generateTitle = note => {\r\n    let searchQuery = this.props.searchQuery;\r\n    let title = note.title;\r\n\r\n    let startIndex = title.toLowerCase().indexOf(searchQuery.toLowerCase());\r\n\r\n    if (startIndex === -1) return <div>{title}</div>;\r\n\r\n    let endIndex = startIndex + searchQuery.length;\r\n\r\n    let pre = title.slice(0, startIndex);\r\n    let highlight = title.slice(startIndex, endIndex);\r\n    let post = title.slice(endIndex);\r\n\r\n    return (\r\n      <div>\r\n        <span>{pre}</span>\r\n        <span style={{ backgroundColor: \"yellow\" }}>{highlight}</span>\r\n        <span>{post}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    var filtered = this.filterNotes(this.props.allNotes);\r\n\r\n    let selectedId = this.props.selectedNote ? this.props.selectedNote._id : \"\";\r\n\r\n    let { searchQuery, onSearch, onClear } = this.props;\r\n\r\n    return (\r\n      <div className=\"sidebar-preview bg-light-gray\">\r\n        <div className=\"input-group search-box\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={searchQuery}\r\n            onChange={e => onSearch(e.currentTarget.value)}\r\n            placeholder=\"Search...\"\r\n          />\r\n          <div className=\"input-group-prepend\">\r\n            <button\r\n              onClick={() => onClear()}\r\n              className=\"btn btn-outline-secondary\"\r\n              type=\"button\"\r\n            >\r\n              clear\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"list-group preview-section\">\r\n          {filtered.map((n, index) => (\r\n            <div\r\n              className=\"list-group-item\"\r\n              style={{\r\n                ...this.individualNotes,\r\n                background:\r\n                  n._id === selectedId\r\n                    ? (n.collection && n.collection.color) || \"lightgray\"\r\n                    : \"white\"\r\n              }}\r\n              key={index}\r\n            >\r\n              <div\r\n                style={{\r\n                  ...this.collectionStyle,\r\n                  background: n.collection.color || \"none\"\r\n                }}\r\n              >\r\n                <span>{truncate(n.collection.name, 12)}</span>\r\n              </div>\r\n              <Link\r\n                key={n._id}\r\n                to={`/notes/${n._id}`}\r\n                style={this.listItemStyle}\r\n                className=\"list-group-item-action\"\r\n              >\r\n                <div>\r\n                  <div className=\"d-flex w-100 justify-content-between\">\r\n                    <h5 className=\"mb-1\">{this.generateTitle(n)}</h5>\r\n                    <small>{moment(n.updated).format(\"MMM D 'YY\")}</small>\r\n                  </div>\r\n                  <div style={this.previewStyle}>\r\n                    {this.generateSearchPreview(n)}\r\n                  </div>\r\n                  <TagsPreview\r\n                    fontSize=\"11px\"\r\n                    tags={n.tags}\r\n                    style={{ marginTop: \"5px\" }}\r\n                    iconColor=\"darkslateblue\"\r\n                    length={n._id === selectedId ? 200 : 45}\r\n                  />\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotesPreview;\r\n","import React, { Component, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faPlus,\r\n  faCaretRight,\r\n  faCaretDown,\r\n  faUserCircle,\r\n  faBook,\r\n  faTags,\r\n  faEdit,\r\n  faCheckCircle,\r\n  faMinusCircle,\r\n  faFillDrip\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { UncontrolledPopover, PopoverBody } from \"reactstrap\";\r\nimport { Popover, OverlayTrigger } from \"react-bootstrap\";\r\nimport AppContext from \"../context/AppContext\";\r\nimport randomColor from \"./../utils/randomColor\";\r\nimport truncate from \"./../utils/truncate\";\r\n\r\nclass NotesFilter extends Component {\r\n  state = {\r\n    editMode: false,\r\n    collectionsToEdit: []\r\n  };\r\n\r\n  toggleEditMode = () => {\r\n    const currentCollections = [...this.props.collections];\r\n    if (!this.state.editMode) {\r\n      this.setState({ editMode: true, collectionsToEdit: currentCollections });\r\n    } else {\r\n      let collectionsToUpdate = this.state.collectionsToEdit.filter(\r\n        (c, index) => {\r\n          return (\r\n            c.name !== currentCollections[index].name ||\r\n            c.color !== currentCollections[index].color\r\n          );\r\n        }\r\n      );\r\n      collectionsToUpdate.forEach(\r\n        async c => await this.props.updateCollections(c, \"edit\")\r\n      );\r\n      this.setState({ editMode: !this.state.editMode });\r\n    }\r\n  };\r\n\r\n  handleCollectionDelete = event => {\r\n    const collectionId = event.currentTarget.getAttribute(\"data\");\r\n    let allCollections = [...this.props.collections];\r\n\r\n    let collection = allCollections.filter(c => c._id === collectionId);\r\n    this.props.updateCollections(collection[0], \"delete\");\r\n  };\r\n\r\n  handleCollectionEdit = (type, collection, index, value) => {\r\n    const collectionsToEdit = [...this.state.collectionsToEdit];\r\n    const collectionToUpdate = { ...collection };\r\n\r\n    if (type === \"name\") collectionToUpdate.name = value;\r\n\r\n    if (type === \"color\") collectionToUpdate.color = value;\r\n\r\n    collectionsToEdit.splice(index, 1, collectionToUpdate);\r\n\r\n    this.setState({ collectionsToEdit });\r\n  };\r\n\r\n  handleColorChange = (color, event) => {\r\n    this.setState({ colorChange: color.hex });\r\n  };\r\n\r\n  filterStyle = {\r\n    display: \"grid\",\r\n    gridTemplateRows: \"40px 60px 200px 300px\",\r\n    overflow: \"auto\",\r\n    padding: \"15px 5px\",\r\n    height: \"100%\",\r\n    width: \"100%\"\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      handleRadioSelect,\r\n      handleCheckboxSelect,\r\n      collectionFilter,\r\n      tagsFilter,\r\n      collections,\r\n      tags\r\n    } = this.props;\r\n\r\n    return (\r\n      <div id=\"filterSection\" style={this.filterStyle} className=\"bg-dark-blue\">\r\n        <Profile />\r\n        <Buttons\r\n          updateCollections={this.props.updateCollections}\r\n          editMode={this.state.editMode}\r\n          toggleEditMode={this.toggleEditMode}\r\n        />\r\n        <CollectionFilter\r\n          toggleEditMode={this.toggleEditMode}\r\n          editMode={this.state.editMode}\r\n          handleRadioSelect={handleRadioSelect}\r\n          handleCollectionEdit={this.handleCollectionEdit}\r\n          handleCollectionDelete={this.handleCollectionDelete}\r\n          collections={collections}\r\n          collectionFilter={collectionFilter}\r\n          collectionsToEdit={this.state.collectionsToEdit}\r\n        />\r\n        <TagFilter\r\n          tags={tags}\r\n          tagsFilter={tagsFilter}\r\n          handleCheckboxSelect={handleCheckboxSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Profile = () => {\r\n  let profileDivStyle = {\r\n    background: \"black\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    color: \"white\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    borderRadius: \"10px\"\r\n  };\r\n\r\n  let profileContentStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"20% auto\",\r\n    width: \"100%\",\r\n    cursor: \"pointer\"\r\n  };\r\n\r\n  return (\r\n    <AppContext.Consumer>\r\n      {value => (\r\n        <div id=\"profile-preview\" style={profileDivStyle}>\r\n          <div style={profileContentStyle}>\r\n            <div style={{ display: \"flex\", margin: \"auto\" }}>\r\n              <FontAwesomeIcon icon={faUserCircle} />\r\n            </div>\r\n            <div style={{ fontSize: \"11px\" }}>\r\n              {(value.user && value.user.email) || \"DEMO MODE\"}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nconst Buttons = ({ updateCollections, toggleEditMode, editMode }) => {\r\n  let [popoverOpen, togglePopover] = useState(false);\r\n  let [newCollection, setNewCollection] = useState(\"\");\r\n\r\n  let pressEnter = event => {\r\n    if (event.keyCode !== 13) return;\r\n\r\n    if (newCollection === \"\") return;\r\n\r\n    const collection = {\r\n      _id: Date.now().toString(),\r\n      name: newCollection.trim(),\r\n      color: randomColor()\r\n    };\r\n    setNewCollection(\"\");\r\n    updateCollections(collection, \"add\");\r\n  };\r\n\r\n  let style = {\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    color: \"white\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-end\",\r\n    padding: \"0 10px\",\r\n    justifyContent: \"space-around\"\r\n  };\r\n\r\n  let buttonStyle = {\r\n    height: \"25px\",\r\n    fontSize: \"11px\",\r\n    padding: \"2px 5px\"\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={style}>\r\n        <button\r\n          className=\"btn btn-secondary btn-sm\"\r\n          style={buttonStyle}\r\n          id=\"add-collection\"\r\n        >\r\n          <FontAwesomeIcon icon={faPlus} />\r\n          <span> Collection</span>\r\n        </button>\r\n        {editMode ? (\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            style={buttonStyle}\r\n            onClick={() => toggleEditMode()}\r\n          >\r\n            <FontAwesomeIcon icon={faCheckCircle} />\r\n            <span> Done</span>\r\n          </button>\r\n        ) : (\r\n          <button\r\n            className=\"btn btn-danger btn-sm\"\r\n            style={buttonStyle}\r\n            onClick={() => toggleEditMode()}\r\n          >\r\n            <FontAwesomeIcon icon={faEdit} />\r\n            <span> Edit</span>\r\n          </button>\r\n        )}\r\n      </div>\r\n      <UncontrolledPopover\r\n        placement=\"bottom\"\r\n        isOpen={popoverOpen}\r\n        target=\"add-collection\"\r\n        trigger=\"legacy\"\r\n        toggle={() => togglePopover(!popoverOpen)}\r\n      >\r\n        <PopoverBody>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={newCollection}\r\n            onChange={e => setNewCollection(e.target.value.toLowerCase())}\r\n            placeholder=\"new collection...\"\r\n            style={{\r\n              fontSize: \".9rem\",\r\n              marginTop: \"10px\",\r\n              lineHeight: \"1\",\r\n              padding: \"0px .75rem\",\r\n              width: \"150px\",\r\n              height: \"calc(2rem + 2px)\"\r\n            }}\r\n            onKeyDown={pressEnter}\r\n            autoFocus\r\n          />\r\n          <small>\r\n            <em>press Enter to save</em>\r\n          </small>{\" \"}\r\n        </PopoverBody>\r\n      </UncontrolledPopover>\r\n    </div>\r\n  );\r\n};\r\n\r\nlet collectionTagStyle = {\r\n  marginTop: \"10px\",\r\n  color: \"white\"\r\n};\r\n\r\nlet dropdownTitle = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"15px auto\",\r\n  width: \"100%\",\r\n  alignItems: \"baseline\"\r\n};\r\n\r\nconst CollectionFilter = ({\r\n  editMode,\r\n  handleRadioSelect,\r\n  handleCollectionEdit,\r\n  handleCollectionDelete,\r\n  collections,\r\n  collectionFilter,\r\n  collectionsToEdit\r\n}) => {\r\n  let [dropdownOpen, setDropdownOpen] = useState(true);\r\n\r\n  return (\r\n    <div id=\"collection-filter\" style={collectionTagStyle}>\r\n      <div className=\"list-group clickable\">\r\n        <div\r\n          style={dropdownTitle}\r\n          onClick={() => setDropdownOpen(!dropdownOpen)}\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#collections\"\r\n          aria-expanded={dropdownOpen}\r\n          aria-controls=\"collections\"\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={dropdownOpen ? faCaretDown : faCaretRight}\r\n            className=\"faCaretDropdown\"\r\n          />\r\n          <div>\r\n            <span>Collections </span>\r\n            <span style={{ paddingLeft: \"10px\" }}>\r\n              {\" \"}\r\n              <FontAwesomeIcon\r\n                icon={faBook}\r\n                style={{ fontSize: \"14px\", transform: \"rotate(-20deg)\" }}\r\n              />\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"collapse multi-collapse show\"\r\n        id=\"collections\"\r\n        style={{\r\n          marginLeft: \"10px\",\r\n          fontSize: \"14px\",\r\n          height: \"85%\",\r\n          overflow: \"auto\"\r\n        }}\r\n      >\r\n        {editMode ? (\r\n          <div></div>\r\n        ) : (\r\n          <div key=\"allCollections\" className=\"form-check clickable\">\r\n            <label className=\"form-check-label\">\r\n              <input\r\n                className=\"form-check-input\"\r\n                type=\"radio\"\r\n                name=\"collection-choices\"\r\n                value=\"\"\r\n                checked={collectionFilter === \"\"}\r\n                onChange={e => handleRadioSelect(e)}\r\n              />\r\n              All\r\n            </label>\r\n          </div>\r\n        )}\r\n        {editMode ? (\r\n          <EditCollections\r\n            collectionsToEdit={collectionsToEdit}\r\n            handleCollectionEdit={handleCollectionEdit}\r\n            handleCollectionDelete={handleCollectionDelete}\r\n          />\r\n        ) : (\r\n          collections.map(c => (\r\n            <div className=\"form-check\" key={c._id} style={{}}>\r\n              <label className=\"form-check-label\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  name=\"collection-choices\"\r\n                  value={c.name}\r\n                  checked={collectionFilter === c.name}\r\n                  onChange={e => handleRadioSelect(e)}\r\n                />\r\n                <div\r\n                  style={{\r\n                    textShadow: `1px 0px #000, 0px 1px #000, -1px 0px #000, 0px -1px #000, 0px 0px 5px ${c.color}, 0px 0px 3px #FFF`,\r\n                    color: c.color,\r\n                    fontWeight: 600,\r\n                    fontSize: \"15px\"\r\n                  }}\r\n                >\r\n                  {truncate(c.name, 18)}\r\n                </div>\r\n              </label>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TagFilter = ({ tags, tagsFilter, handleCheckboxSelect }) => {\r\n  let [dropdownOpen, setDropdownOpen] = useState(true);\r\n\r\n  return (\r\n    <div id=\"tags-filter\" style={collectionTagStyle}>\r\n      <div className=\"list-group clickable\">\r\n        <div\r\n          style={dropdownTitle}\r\n          onClick={() => setDropdownOpen(!dropdownOpen)}\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#tags\"\r\n          aria-expanded={dropdownOpen}\r\n          aria-controls=\"tags\"\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={dropdownOpen ? faCaretDown : faCaretRight}\r\n            className=\"faCaretDropdown\"\r\n          />\r\n          <div>\r\n            <span>Tags </span>\r\n            <span style={{ paddingLeft: \"10px\" }}>\r\n              {\" \"}\r\n              <FontAwesomeIcon icon={faTags} style={{ fontSize: \"12px\" }} />\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"collapse multi-collapse show\"\r\n        id=\"tags\"\r\n        style={{\r\n          marginLeft: \"10px\",\r\n          fontSize: \"14px\",\r\n          height: \"90%\",\r\n          overflow: \"auto\"\r\n        }}\r\n      >\r\n        {tags.map(tag => (\r\n          <div className=\"form-check\" key={tag}>\r\n            <label className=\"form-check-label\">\r\n              <input\r\n                className=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                name=\"tag-choices\"\r\n                id={tag}\r\n                value={tag}\r\n                checked={tagsFilter !== [] && tagsFilter.includes(tag)}\r\n                onChange={e => handleCheckboxSelect(e)}\r\n              />\r\n              {truncate(tag, 18)}\r\n            </label>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst EditCollections = ({\r\n  collectionsToEdit,\r\n  handleCollectionEdit,\r\n  handleCollectionDelete\r\n}) => {\r\n  return (\r\n    <div>\r\n      {collectionsToEdit.map((c, i) => (\r\n        <div key={c._id} className=\"edit-group\">\r\n          <div\r\n            className=\"edit-group-prepend\"\r\n            data={c._id}\r\n            onClick={e => handleCollectionDelete(e)}\r\n          >\r\n            <FontAwesomeIcon\r\n              icon={faMinusCircle}\r\n              style={{\r\n                color: \"red\",\r\n                fontSize: \"14px\",\r\n                margin: \"auto 10px auto 0px\"\r\n              }}\r\n              className=\"clickable\"\r\n            />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"edit-form-control\"\r\n            aria-label=\"Small\"\r\n            value={c.name}\r\n            onChange={e => handleCollectionEdit(\"name\", c, i, e.target.value)}\r\n          />\r\n          <EditColor\r\n            color={c.color}\r\n            collection={c}\r\n            handleCollectionEdit={handleCollectionEdit}\r\n            index={i}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst EditColor = ({ color, collection, handleCollectionEdit, index }) => {\r\n  const [colors, setColors] = useState([\r\n    \"#BCAAA4\",\r\n    \"#EF9A9A\",\r\n    \"#C5E1A5\",\r\n    \"#FFCC80\",\r\n    \"#CE93D8\",\r\n    \"#4FC3F7\"\r\n  ]);\r\n  const [newColor, setNewColor] = useState(\"\");\r\n\r\n  const componentStyle = {\r\n    width: \"180px\",\r\n    height: \"70px\",\r\n    display: \"grid\",\r\n    gridTemplateRows: \"30px 40px\",\r\n    gridTemplateColumns: \"auto\"\r\n  };\r\n\r\n  const divStyle = {\r\n    width: \"180px\",\r\n    height: \"30px\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(6, 30px)\"\r\n  };\r\n\r\n  const swatchStyle = {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    padding: \"2px\"\r\n  };\r\n\r\n  return (\r\n    <OverlayTrigger\r\n      trigger=\"click\"\r\n      placement=\"top\"\r\n      rootClose\r\n      overlay={\r\n        <div>\r\n          <Popover id={collection._id} style={{ border: `3px solid ${color}` }}>\r\n            <Popover.Title>\r\n              selected: <em>{color}</em>\r\n            </Popover.Title>\r\n            <Popover.Content>\r\n              <div style={componentStyle}>\r\n                <div style={divStyle}>\r\n                  {colors.map(c => (\r\n                    <div style={swatchStyle} key={c}>\r\n                      <div\r\n                        style={{ backgroundColor: c }}\r\n                        className=\"w100 h100 hover-grow-10 clickable\"\r\n                        onClick={() =>\r\n                          handleCollectionEdit(\"color\", collection, index, c)\r\n                        }\r\n                      ></div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    display: \"grid\",\r\n                    gridTemplateColumns: \"40% 60% auto\"\r\n                  }}\r\n                >\r\n                  <button\r\n                    className=\"btn btn-small btn-info\"\r\n                    style={{\r\n                      padding: \"2px 5px\",\r\n                      fontSize: \"12px\",\r\n                      margin: \"auto\"\r\n                    }}\r\n                    onClick={() => setColors(colors.map(() => randomColor()))}\r\n                  >\r\n                    random!\r\n                  </button>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    placeholder=\"hex key...\"\r\n                    value={newColor}\r\n                    onChange={e => setNewColor(e.target.value)}\r\n                    type=\"text\"\r\n                    maxLength=\"6\"\r\n                    style={{\r\n                      margin: \"auto\",\r\n                      padding: \"2px 25px 2px 5px\",\r\n                      height: \"auto\",\r\n                      fontSize: \"12px\"\r\n                    }}\r\n                  />\r\n                  <FontAwesomeIcon\r\n                    icon={faCheckCircle}\r\n                    style={{\r\n                      margin: \"auto\",\r\n                      position: \"relative\",\r\n                      left: \"-20px\",\r\n                      color: \"blue\",\r\n                      fontSize: \"16px\"\r\n                    }}\r\n                    className=\"clickable hover-grow-10\"\r\n                    onClick={() =>\r\n                      handleCollectionEdit(\r\n                        \"color\",\r\n                        collection,\r\n                        index,\r\n                        \"#\" + newColor\r\n                      )\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </Popover.Content>\r\n          </Popover>\r\n        </div>\r\n      }\r\n    >\r\n      <div className=\"edit-group-prepend\">\r\n        <FontAwesomeIcon\r\n          icon={faFillDrip}\r\n          style={{\r\n            color: collection.color,\r\n            margin: \"auto 0px auto 10px\",\r\n            fontSize: \"14px\"\r\n          }}\r\n          className=\"clickable\"\r\n        />\r\n      </div>\r\n    </OverlayTrigger>\r\n  );\r\n};\r\n\r\nexport default NotesFilter;\r\n","import React, { Component } from \"react\";\r\nimport NotesPreview from \"./NotesPreview\";\r\nimport NotesFilter from \"./NotesFilter\";\r\n\r\nclass SideBar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tagsOpen: true,\r\n      collectionFilter: \"\",\r\n      tagsFilter: []\r\n    };\r\n\r\n    this.handleCheckboxSelect = this.handleCheckboxSelect.bind(this);\r\n    this.handleRadioSelect = this.handleRadioSelect.bind(this);\r\n    this.handleDropdownClick = this.handleDropdownClick.bind(this);\r\n  }\r\n\r\n  sidebarStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"200px auto\",\r\n    margin: 0,\r\n    width: \"100%\",\r\n    height: \"100%\"\r\n  };\r\n\r\n  handleDropdownClick(e) {\r\n    const dataTarget = e.currentTarget.getAttribute(\"data-target\");\r\n    const isExpanded = e.currentTarget.getAttribute(\"aria-expanded\");\r\n\r\n    switch (dataTarget) {\r\n      case \"#collections\":\r\n        if (isExpanded === \"false\") {\r\n          this.setState({ collectionsOpen: false });\r\n        } else {\r\n          this.setState({ collectionsOpen: true });\r\n        }\r\n        break;\r\n      case \"#tags\":\r\n        if (isExpanded === \"false\") {\r\n          this.setState({ tagsOpen: false });\r\n        } else {\r\n          this.setState({ tagsOpen: true });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  handleRadioSelect(event) {\r\n    this.setState({\r\n      collectionFilter: event.target.value,\r\n      tagsFilter: []\r\n    });\r\n  }\r\n\r\n  handleCheckboxSelect(event) {\r\n    let selectedTags = this.state.tagsFilter;\r\n    let tag = event.target.value;\r\n\r\n    if (selectedTags.includes(tag)) {\r\n      let newTags = selectedTags;\r\n      newTags.splice(selectedTags.indexOf(tag), 1);\r\n      this.setState({\r\n        tagsFilter: newTags\r\n      });\r\n    } else {\r\n      this.setState({\r\n        tagsFilter: [...this.state.tagsFilter, tag]\r\n      });\r\n    }\r\n  }\r\n\r\n  filterNotes(notes) {\r\n    let filteredNotes = notes;\r\n\r\n    if (this.state.collectionFilter)\r\n      filteredNotes = filteredNotes.filter(\r\n        n => n.collection.name === this.state.collectionFilter\r\n      );\r\n\r\n    let tags = [];\r\n    filteredNotes.forEach(n => tags.push(...n.tags));\r\n    tags = [...new Set(tags)];\r\n\r\n    if (this.state.tagsFilter.length > 0) {\r\n      let lowerTags = this.state.tagsFilter.map(t => t.toLowerCase());\r\n\r\n      filteredNotes = filteredNotes.filter(n => {\r\n        let combinedTags = [...n.tags.map(n => n.toLowerCase()), ...lowerTags];\r\n        let setTags = [...new Set(combinedTags)];\r\n        return setTags.length !== combinedTags.length;\r\n      });\r\n    }\r\n\r\n    return { filteredNotes, tags };\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      searchQuery,\r\n      allNotes,\r\n      selectedNote,\r\n      onSearch,\r\n      onClear,\r\n      collections,\r\n      updateCollections\r\n    } = this.props;\r\n\r\n    let tags = [];\r\n\r\n    if (allNotes) {\r\n      let notes = this.filterNotes(allNotes);\r\n      allNotes = notes.filteredNotes;\r\n      tags = notes.tags.sort();\r\n    }\r\n\r\n    return (\r\n      <div style={this.sidebarStyle}>\r\n        <NotesFilter\r\n          handleDropdownClick={this.handleDropdownClick}\r\n          handleRadioSelect={this.handleRadioSelect}\r\n          handleCheckboxSelect={this.handleCheckboxSelect}\r\n          collectionFilter={this.state.collectionFilter}\r\n          tagsFilter={this.state.tagsFilter}\r\n          collections={collections}\r\n          tags={tags}\r\n          key={collections.length}\r\n          updateCollections={updateCollections}\r\n          allNotes={allNotes}\r\n        />\r\n        <NotesPreview\r\n          allNotes={allNotes}\r\n          selectedNote={selectedNote}\r\n          searchQuery={searchQuery}\r\n          collections={collections}\r\n          onSearch={onSearch}\r\n          onClear={onClear}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideBar;\r\n","import { apiUrl } from \"../config\";\r\nimport {\r\n  httpGet,\r\n  httpPost,\r\n  httpPut,\r\n  httpDelete\r\n} from \"../services/httpService\";\r\n\r\nasync function getNotes() {\r\n  const response = await httpGet(apiUrl + \"notes\");\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  response.forEach(n => {\r\n    n.collection = n.col;\r\n    delete n.col;\r\n  });\r\n  return response;\r\n}\r\n\r\nasync function postNote(note) {\r\n  const response = await httpPost(\r\n    apiUrl + \"notes\",\r\n    JSON.stringify({\r\n      title: note.title,\r\n      content: note.content,\r\n      tags: note.tags,\r\n      collection: note.collection,\r\n      user: note.user\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  response.collection = response.col;\r\n  delete response.col;\r\n\r\n  return response;\r\n}\r\n\r\nasync function putNote(note) {\r\n  const response = await httpPut(\r\n    apiUrl + \"notes/\" + note._id,\r\n    JSON.stringify({\r\n      title: note.title,\r\n      content: note.content,\r\n      tags: note.tags,\r\n      collection: note.collection,\r\n      user: note.user\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  response.collection = response.col;\r\n  delete response.col;\r\n\r\n  return response;\r\n}\r\n\r\nasync function deleteNote(id) {\r\n  const response = await httpDelete(apiUrl + \"notes/\" + id);\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response._id;\r\n}\r\n\r\nexport { getNotes, putNote, postNote, deleteNote };\r\n","import { apiUrl } from \"../config\";\r\nimport {\r\n  httpGet,\r\n  httpPost,\r\n  httpPut,\r\n  httpDelete\r\n} from \"../services/httpService\";\r\n\r\nexport async function getCollections() {\r\n  const response = await httpGet(apiUrl + \"collections\");\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response;\r\n}\r\n\r\nexport async function postCollection(collection) {\r\n  const response = await httpPost(\r\n    apiUrl + \"collections\",\r\n    JSON.stringify({\r\n      name: collection.name,\r\n      color: collection.color,\r\n      user: collection.user\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response;\r\n}\r\n\r\nexport async function putCollection(collection) {\r\n  const response = await httpPut(\r\n    apiUrl + \"collections/\" + collection._id,\r\n    JSON.stringify({\r\n      name: collection.name,\r\n      color: collection.color,\r\n      user: collection.user\r\n    })\r\n  );\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response;\r\n}\r\n\r\nexport async function deleteCollection(id) {\r\n  const response = await httpDelete(apiUrl + \"collections/\" + id);\r\n\r\n  if (response.error) {\r\n    throw new Error(response.message);\r\n  }\r\n\r\n  return response._id;\r\n}\r\n","export const DEMONOTES = [\r\n  {\r\n    _id: \"fg0gr34hgioa98g4\",\r\n    title: \"Portland Trail Blazers\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"20eqn\",\r\n          text: \"Lineup\",\r\n          type: \"header-three\",\r\n          depth: 0,\r\n          inlineStyleRanges: [\r\n            {\r\n              offset: 0,\r\n              length: 6,\r\n              style: \"UNDERLINE\"\r\n            }\r\n          ],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"46tkh\",\r\n          text: \"Damian Lillard\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"aboo4\",\r\n          text: \"CJ McCollum\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"fupsb\",\r\n          text: \"Jusif Nurkic\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"c3u3r\",\r\n          text: \"Kent Bazemore\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"5cr5i\",\r\n          text: \"Rodney Hood\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    tags: [\"portland\", \"sports\", \"basketball\"],\r\n    collection: {\r\n      _id: \"rht5wsbsgnw\",\r\n      name: \"sports\",\r\n      color: \"greenyellow\"\r\n    },\r\n    updated: \"2019-07-11T04:05:42.426Z\"\r\n  },\r\n  {\r\n    _id: \"yh533g54yh5335y4gs4\",\r\n    title: \"Sapiens\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"6ef7d\",\r\n          text: \"Book notes!\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    tags: [\"books\", \"history\"],\r\n    collection: {\r\n      _id: \"adsfasdfadsf\",\r\n      name: \"books\",\r\n      color: \"cyan\"\r\n    },\r\n    updated: \"2019-03-11T04:05:42.426Z\",\r\n    user: \"lords.austin@gmail.com\"\r\n  },\r\n  {\r\n    _id: \"thtrjsbehrytu5667s5335y\",\r\n    title: \"Sandy Ridge Trails\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"rhc1\",\r\n          text: \"Some of the best mountain biking in Oregon...\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"300d5\",\r\n          text: \"\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"ao9ar\",\r\n          text: \"Top Trails\",\r\n          type: \"header-three\",\r\n          depth: 0,\r\n          inlineStyleRanges: [{ offset: 0, length: 10, style: \"ITALIC\" }],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"dm3nl\",\r\n          text: \"Hide and Seek\",\r\n          type: \"ordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"flb07\",\r\n          text: \"Rock Drop\",\r\n          type: \"ordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"70n88\",\r\n          text: \"Quid Pro Flow\",\r\n          type: \"ordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"erm74\",\r\n          text: \"Flow Motion\",\r\n          type: \"ordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"3insv\",\r\n          text: \"Communication Breakdown\",\r\n          type: \"ordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"6bku3\",\r\n          text: \"About\",\r\n          type: \"header-three\",\r\n          depth: 0,\r\n          inlineStyleRanges: [{ offset: 0, length: 5, style: \"UNDERLINE\" }],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"606ro\",\r\n          text: \"Open Year-Round\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"dhs7n\",\r\n          text: \"No Fees\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"3k3j9\",\r\n          text: \"40 miles east of Portland off US Highway 26\\n\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    tags: [\"portland\", \"mountain biking\"],\r\n    collection: {\r\n      _id: \"rht5wsbsgnw\",\r\n      name: \"sports\",\r\n      color: \"greenyellow\"\r\n    },\r\n    updated: \"2019-08-11T04:05:42.426Z\"\r\n  }\r\n];\r\n\r\nexport function getNote(id) {\r\n  return DEMONOTES.find(n => n._id === id);\r\n}\r\n","export const DEMOCOLLECTIONS = [\r\n  {\r\n    _id: \"adsfasdfadsf\",\r\n    name: \"books\",\r\n    color: \"cyan\"\r\n  },\r\n  {\r\n    _id: \"rht5wsbsgnw\",\r\n    name: \"sports\",\r\n    color: \"greenyellow\"\r\n  },\r\n  {\r\n    _id: \"nvcxcbvtsasdg\",\r\n    name: \"other\",\r\n    color: \"lightgray\"\r\n  }\r\n];\r\n\r\nexport function getCollection(id) {\r\n  return DEMOCOLLECTIONS.find(c => c._id === id);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport DraftEditor from \"./DraftEditor\";\r\nimport { EditorState, convertToRaw, convertFromRaw } from \"draft-js\";\r\nimport SideBar from \"./SideBar\";\r\nimport {\r\n  getNotes,\r\n  putNote,\r\n  postNote,\r\n  deleteNote\r\n} from \"../services/notesService\";\r\nimport {\r\n  getCollections,\r\n  putCollection,\r\n  postCollection,\r\n  deleteCollection\r\n} from \"../services/collectionsService\";\r\nimport { DEMONOTES } from \"../services/demoNotesService\";\r\nimport { DEMOCOLLECTIONS } from \"../services/demoCollectionsService\";\r\nimport \"../css/notes.css\";\r\nimport LoadingScreen from \"./LoadingScreen\";\r\n\r\nclass Notes extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      allNotes: null,\r\n      errors: {},\r\n      editorState: EditorState.createEmpty(),\r\n      selectedNote: null,\r\n      searchQuery: \"\",\r\n      collections: []\r\n    };\r\n\r\n    this.onEditorChange = editorState => {\r\n      this.setState({ editorState });\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const id = this.props.match.params.id || null;\r\n\r\n    var NOTES;\r\n    var COLLECTIONS;\r\n\r\n    if (this.props.user) {\r\n      try {\r\n        NOTES = await getNotes();\r\n        COLLECTIONS = await getCollections();\r\n      } catch (err) {\r\n        toast.error(err.message);\r\n        this.props.updateUser(null);\r\n        NOTES = DEMONOTES;\r\n        COLLECTIONS = DEMOCOLLECTIONS;\r\n      }\r\n    } else {\r\n      NOTES = DEMONOTES;\r\n      COLLECTIONS = DEMOCOLLECTIONS;\r\n    }\r\n\r\n    if (!id || !NOTES)\r\n      return this.setState({ allNotes: NOTES, collections: COLLECTIONS });\r\n\r\n    const note = NOTES.find(n => n._id === id) || null;\r\n    if (note && !note.content.entityMap) {\r\n      note.content.entityMap = Object.create({});\r\n    }\r\n    const editorState = note\r\n      ? EditorState.createWithContent(convertFromRaw(note.content))\r\n      : EditorState.createEmpty();\r\n\r\n    this.setState({\r\n      allNotes: NOTES,\r\n      collections: COLLECTIONS,\r\n      selectedNote: note,\r\n      editorState\r\n    });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    var { allNotes } = this.state;\r\n\r\n    // if User logged out, update state to DEMO\r\n    if (prevProps.user && this.props.user == null) {\r\n      this.setState({\r\n        allNotes: DEMONOTES,\r\n        collections: DEMOCOLLECTIONS,\r\n        selectedNote: null,\r\n        editorState: EditorState.createEmpty()\r\n      });\r\n      return this.props.history.replace(\"/notes\");\r\n    }\r\n\r\n    const id = this.props.match.params.id;\r\n\r\n    if (!id || !this.state.allNotes) return;\r\n\r\n    if (id === \"new\") {\r\n      this.setState({\r\n        editorState: EditorState.createEmpty(),\r\n        selectedNote: null\r\n      });\r\n      return this.props.history.replace(\"/notes\");\r\n    }\r\n\r\n    const note = await allNotes.find(n => n._id === id);\r\n\r\n    if (note && !note.content.entityMap) {\r\n      note.content.entityMap = Object.create({});\r\n    }\r\n    if (!note) return this.props.history.replace(\"/notes\");\r\n    const editorState = EditorState.createWithContent(\r\n      convertFromRaw(note.content)\r\n    );\r\n\r\n    if (this.state.selectedNote && id !== this.state.selectedNote._id)\r\n      return this.setState({ selectedNote: note, editorState });\r\n\r\n    if (!this.state.selectedNote)\r\n      return this.setState({ selectedNote: note, editorState });\r\n  }\r\n\r\n  handleSearch = query => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  handleClear = () => {\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  updateSelectedNote = note => {\r\n    this.setState({ selectedNote: note });\r\n  };\r\n\r\n  updateCollections = async (newCollection, action) => {\r\n    let collections = [...this.state.collections];\r\n    let allNotes = [...this.state.allNotes];\r\n    let indexToUpdate = collections.findIndex(c => c._id === newCollection._id);\r\n\r\n    let notesToChange = allNotes\r\n      .filter(n => n.collection._id === newCollection._id)\r\n      .map(n => ({\r\n        _id: n._id,\r\n        title: n.title,\r\n        content: n.content,\r\n        tags: n.tags,\r\n        collection: action === \"edit\" ? newCollection : {},\r\n        updated: n.updated\r\n      }));\r\n\r\n    if (this.props.user) {\r\n      newCollection.user = this.props.user.email;\r\n\r\n      // all async stuff\r\n      try {\r\n        // DELETE COLLECTION\r\n        if (action === \"delete\") {\r\n          const deletedId = await deleteCollection(newCollection._id);\r\n          if (!deletedId)\r\n            throw new Error(\"Error deleting collection. Try again\");\r\n        }\r\n        // PUT COLLECTION\r\n        if (action === \"edit\") {\r\n          newCollection = await putCollection(newCollection);\r\n          if (!newCollection)\r\n            throw new Error(\"Error updating collection. Try again\");\r\n        }\r\n\r\n        // PUT NOTES\r\n        notesToChange.forEach(async newNote => {\r\n          const updatedNote = await putNote(newNote);\r\n          if (!updatedNote)\r\n            throw new Error(\"Error updating note: \" + newNote.title);\r\n\r\n          allNotes.splice(\r\n            allNotes.findIndex(oldNote => updatedNote._id === oldNote._id),\r\n            1,\r\n            updatedNote\r\n          );\r\n        });\r\n\r\n        // POST COLLECTION\r\n        if (!collections.includes(newCollection) && action === \"add\") {\r\n          newCollection = await postCollection(newCollection);\r\n          if (!newCollection)\r\n            throw new Error(\"Error creating new collection. Try again\");\r\n        }\r\n      } catch (error) {\r\n        return toast.error(error.message);\r\n      }\r\n    }\r\n\r\n    // if DEMO MODE: no async\r\n\r\n    if (action === \"delete\") collections.splice(indexToUpdate, 1);\r\n\r\n    if (action === \"edit\") collections.splice(indexToUpdate, 1, newCollection);\r\n\r\n    if (!this.props.user)\r\n      notesToChange.forEach(newNote => {\r\n        allNotes.splice(\r\n          allNotes.findIndex(oldNote => newNote._id === oldNote._id),\r\n          1,\r\n          newNote\r\n        );\r\n      });\r\n\r\n    if (!collections.includes(newCollection) && action === \"add\")\r\n      collections.push(newCollection);\r\n\r\n    const selectedNote = allNotes.find(\r\n      note => note._id === this.props.match.params.id\r\n    );\r\n    return this.setState({ collections, allNotes, selectedNote });\r\n  };\r\n\r\n  save = async selectedNote => {\r\n    const { allNotes, editorState } = this.state;\r\n    const currentEditorContent = convertToRaw(editorState.getCurrentContent());\r\n    if (!selectedNote) selectedNote = Object.create({});\r\n\r\n    const newNote = {\r\n      _id: selectedNote._id || Date.now().toString(),\r\n      title: selectedNote.title || \"\",\r\n      content: currentEditorContent,\r\n      tags: selectedNote.tags || [],\r\n      collection: selectedNote.collection || {}\r\n    };\r\n\r\n    const existingIndex = allNotes.findIndex(n => n._id === selectedNote._id);\r\n    let collections = [...this.state.collections];\r\n\r\n    const isNewCollection =\r\n      newNote.collection._id &&\r\n      !collections.filter(c => c.name === newNote.collection.name).length;\r\n\r\n    var newCollection;\r\n    var savedNote;\r\n\r\n    // all async here\r\n    if (this.props.user) {\r\n      try {\r\n        // POST Collection\r\n        if (isNewCollection) {\r\n          newNote.collection.user = this.props.user.email;\r\n          newCollection = await postCollection(newNote.collection);\r\n          if (!newCollection)\r\n            throw new Error(\"New collection not saved. Try again.\");\r\n          newNote.collection = newCollection;\r\n        }\r\n        // PUT Note\r\n        if (existingIndex !== -1) {\r\n          savedNote = await putNote(newNote);\r\n          if (!savedNote) throw new Error(\"Error updating note\");\r\n        } else {\r\n          // POST Note\r\n          savedNote = await postNote(newNote);\r\n          if (!savedNote) throw new Error(\"Error saving new note\");\r\n        }\r\n      } catch (error) {\r\n        return toast.error(error.message);\r\n      }\r\n    }\r\n\r\n    // if DEMO mode\r\n    if (isNewCollection) collections.push(newCollection || newNote.collection);\r\n    if (existingIndex !== -1)\r\n      allNotes.splice(existingIndex, 1, savedNote || newNote);\r\n    if (existingIndex === -1) allNotes.push(savedNote || newNote);\r\n\r\n    const redirectId = savedNote ? savedNote._id : newNote._id;\r\n\r\n    this.setState({\r\n      allNotes,\r\n      selectedNote: savedNote || newNote,\r\n      collections\r\n    });\r\n\r\n    this.props.history.replace(`/notes/${redirectId}`);\r\n  };\r\n\r\n  handleDelete = async () => {\r\n    let id = this.props.match.params.id;\r\n\r\n    if (this.props.user) {\r\n      try {\r\n        const deleteSuccess = await deleteNote(id);\r\n        if (!deleteSuccess)\r\n          throw new Error(\"Could not delete note. Try again.\");\r\n      } catch (error) {\r\n        return toast.error(error.message);\r\n      }\r\n    }\r\n    this.setState({\r\n      allNotes: this.state.allNotes.filter(n => n._id !== id),\r\n      editorState: EditorState.createEmpty(),\r\n      selectedNote: null,\r\n      title: \"\"\r\n    });\r\n    this.props.history.replace(\"/notes\");\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      editorState,\r\n      allNotes,\r\n      searchQuery,\r\n      collections,\r\n      selectedNote,\r\n      title\r\n    } = this.state;\r\n\r\n    if (!allNotes || !collections) return <LoadingScreen />;\r\n\r\n    return (\r\n      <div className=\"app-page\">\r\n        <SideBar\r\n          editorState={editorState}\r\n          allNotes={allNotes}\r\n          onSearch={this.handleSearch}\r\n          searchQuery={searchQuery}\r\n          onClear={this.handleClear}\r\n          collections={collections}\r\n          selectedNote={selectedNote}\r\n          updateCollections={this.updateCollections}\r\n        />\r\n        <DraftEditor\r\n          onEditorChange={this.onEditorChange}\r\n          handleTitle={this.handleTitle}\r\n          title={title}\r\n          save={this.save}\r\n          handleDelete={this.handleDelete}\r\n          updateSelectedNote={this.updateSelectedNote}\r\n          collections={collections}\r\n          editorState={editorState}\r\n          selectedNote={selectedNote}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Notes;\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { login } from \"../../services/auth\";\r\nimport \"./login.css\";\r\n\r\nconst Login = ({ user, updateUser }) => {\r\n  let [email, setEmail] = useState(\"\");\r\n  let [password, setPassword] = useState(\"\");\r\n\r\n  const handleLogin = async event => {\r\n    event.preventDefault();\r\n    try {\r\n      let newUser = await login(email, password);\r\n      if (newUser) {\r\n        updateUser(newUser);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n\r\n  if (user) return <Redirect to=\"/notes\" />;\r\n\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"masthead\">\r\n        <div id=\"masthead-heading\" className=\"container\">\r\n          <h1 className=\"display-4\">\r\n            Welcome back to <b>Notable</b>.\r\n          </h1>\r\n          <h3>\r\n            <em>A simple note-taking application.</em>\r\n          </h3>\r\n        </div>\r\n\r\n        <form id=\"signUpForm\" className=\"container\" onSubmit={handleLogin}>\r\n          <div className=\"form-group\">\r\n            <label>Email address</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form-control\"\r\n              id=\"signUpEmail\"\r\n              aria-describedby=\"emailHelp\"\r\n              placeholder=\"Email\"\r\n              required\r\n              maxLength=\"50\"\r\n              title=\"Email address is required\"\r\n              onChange={e => setEmail(e.target.value)}\r\n              value={email}\r\n            />\r\n            <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n              We'll never share your email with anyone else.\r\n            </small>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form-control\"\r\n              id=\"signUpPassword\"\r\n              placeholder=\"Password\"\r\n              required\r\n              minLength=\"8\"\r\n              onChange={e => setPassword(e.target.value)}\r\n              value={password}\r\n            />\r\n            <small id=\"passwordHelp\" className=\"form-text text-muted\">\r\n              Minimum length: 8 characters\r\n            </small>\r\n          </div>\r\n\r\n          <button type=\"submit\" form=\"signUpForm\" className=\"btn btn-primary\">\r\n            Login\r\n          </button>\r\n          <div className=\"float-right\">\r\n            <Link to=\"/register\">Need to register? Click here.</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { register } from \"../../services/auth\";\r\nimport \"./login.css\";\r\n\r\nconst Register = ({ user, updateUser }) => {\r\n  let [email, setEmail] = useState(\"\");\r\n  let [password, setPassword] = useState(\"\");\r\n\r\n  const handleRegister = async event => {\r\n    event.preventDefault();\r\n    try {\r\n      let newUser = await register(email, password);\r\n      if (newUser) {\r\n        updateUser(newUser);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n\r\n  if (user) return <Redirect to=\"/notes\" />;\r\n\r\n  return (\r\n    <div className=\"background\">\r\n      <div className=\"masthead\">\r\n        <div id=\"masthead-heading\" className=\"container\">\r\n          <h1 className=\"display-4\">\r\n            Welcome to <b>Notable</b>.\r\n          </h1>\r\n          <h3>\r\n            <em>A simple note-taking application.</em>\r\n          </h3>\r\n        </div>\r\n\r\n        <form id=\"signUpForm\" className=\"container\" onSubmit={handleRegister}>\r\n          <div className=\"form-group\">\r\n            <label>Email address</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form-control\"\r\n              id=\"signUpEmail\"\r\n              aria-describedby=\"emailHelp\"\r\n              placeholder=\"Email\"\r\n              required\r\n              maxLength=\"50\"\r\n              title=\"Email address is required\"\r\n              onChange={e => setEmail(e.target.value)}\r\n              value={email}\r\n            />\r\n            <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n              We'll never share your email with anyone else.\r\n            </small>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form-control\"\r\n              id=\"signUpPassword\"\r\n              placeholder=\"Password\"\r\n              required\r\n              minLength=\"8\"\r\n              onChange={e => setPassword(e.target.value)}\r\n              value={password}\r\n            />\r\n            <small id=\"passwordHelp\" className=\"form-text text-muted\">\r\n              Minimum length: 8 characters\r\n            </small>\r\n          </div>\r\n\r\n          <button type=\"submit\" form=\"signUpForm\" className=\"btn btn-primary\">\r\n            Register\r\n          </button>\r\n          <div className=\"float-right\">\r\n            <Link to=\"/login\">Already registered? Click here.</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\nimport LoadingScreen from \"./components/LoadingScreen\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toast } from \"react-toastify\";\r\nimport NavBar from \"./components/NavBar\";\r\nimport Notes from \"./components/Notes\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Register from \"./components/Login/Register\";\r\nimport { validateUser } from \"./services/auth\";\r\nimport AppContext from \"./context/AppContext\";\r\nimport \"react-toastify/dist/ReactToastify.min.css\";\r\nimport \"./css/App.css\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null,\r\n      receivedAsyncData: false\r\n    };\r\n\r\n    this.updateUser = this.updateUser.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const user = await validateUser();\r\n      if (!user) console.log(\"User not logged in\");\r\n      this.setState({ user, receivedAsyncData: true });\r\n    } catch (error) {\r\n      toast.error(\"Unexpected error: please try refreshing the page.\");\r\n      console.log(error);\r\n      this.setState({ receivedAsyncData: true });\r\n    }\r\n  }\r\n\r\n  updateUser = user => {\r\n    this.setState({ user });\r\n  };\r\n\r\n  render() {\r\n    if (!this.state.receivedAsyncData) return <LoadingScreen />;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <AppContext.Provider\r\n          value={{\r\n            user: this.state.user,\r\n            updateUser: this.updateUser\r\n          }}\r\n        >\r\n          <ToastContainer />\r\n          <NavBar />\r\n          <main className=\"app-background\">\r\n            <Switch>\r\n              <Route\r\n                path=\"/notes/:id\"\r\n                render={props => (\r\n                  <Notes\r\n                    user={this.state.user}\r\n                    updateUser={this.updateUser}\r\n                    {...props}\r\n                  />\r\n                )}\r\n              />\r\n              <Route\r\n                path=\"/notes\"\r\n                render={props => (\r\n                  <Notes\r\n                    user={this.state.user}\r\n                    updateUser={this.updateUser}\r\n                    {...props}\r\n                  />\r\n                )}\r\n              />\r\n              <Route\r\n                path=\"/login\"\r\n                render={props => (\r\n                  <Login\r\n                    user={this.state.user}\r\n                    updateUser={this.updateUser}\r\n                    {...props}\r\n                  />\r\n                )}\r\n              />\r\n              <Route\r\n                path=\"/register\"\r\n                render={props => (\r\n                  <Register\r\n                    user={this.state.user}\r\n                    updateUser={this.updateUser}\r\n                    {...props}\r\n                  />\r\n                )}\r\n              />\r\n              <Redirect from=\"/\" exact to=\"/notes\" />\r\n            </Switch>\r\n          </main>\r\n        </AppContext.Provider>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/js/dist/collapse\";\r\nimport \"font-awesome/css/font-awesome.css\";\r\n\r\nReactDOM.render(\r\n  <HashRouter>\r\n    <App />\r\n  </HashRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}