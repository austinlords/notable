{"version":3,"sources":["config.js","components/NavBar.jsx","components/common/CollectionPreview.jsx","components/EditorCollections.jsx","utils/randomColor.js","components/common/TagsPreview.jsx","components/EditorTags.jsx","components/EditorMenu.jsx","components/DraftEditor.jsx","components/NotesPreview.jsx","components/NotesSearch.jsx","components/NotesFilter.jsx","components/SideBar.jsx","services/fakePostsService.js","services/fakeCollectionsService.js","components/Notes.jsx","App.js","index.js"],"names":["module","exports","apiUrl","notesPreviewLength","NavBar","className","to","CollectionPreview","fontSize","collection","style","len","length","colStr","hasOwnProperty","name","slice","linkStyle","color","fontStyle","cursor","icon","faBook","marginRight","transform","EditorCollections","state","collectionPopoverOpen","newCollection","onChange","event","setState","target","value","togglePopover","handleCollectionSelect","props","collections","find","c","_id","note","selectedNote","save","pressEnter","keyCode","Date","now","toString","title","content","convertToRaw","editorState","getCurrentContent","tags","Math","random","substr","this","textAlign","padding","id","UncontrolledPopover","placement","isOpen","trigger","toggle","PopoverHeader","PopoverBody","key","map","type","checked","e","placeholder","marginTop","lineHeight","width","height","onKeyDown","Component","TagsPreview","iconColor","tagLen","tagsStr","join","faTags","EditorTags","tagsPopoverOpen","newTag","handleTagsDelete","tag","currentTarget","getAttribute","filter","t","includes","push","data","onClick","faMinusCircle","autoFocus","EditorMenu","menuStyle","margin","display","justifyContent","crudStyle","alignItems","metaDataStyle","handleDelete","aria-hidden","DraftEditor","handleTitle","updateSelectedNote","currentEditorContent","controlsStyle","fontFamily","verticalLine","borderRight","focus","editor","handleKeyCommand","_handleKeyCommand","bind","toggleBlockType","_toggleBlockType","toggleInlineStyle","_toggleInlineStyle","command","newState","RichUtils","blockType","inlineStyle","onToggle","blockStyleFn","getBlockStyle","customStyleMap","styleMap","keyBindingFn","mapKeyToEditorCommand","onEditorChange","ref","spellCheck","React","CODE","backgroundColor","block","getType","StyleButton","preventDefault","active","onMouseDown","label","BLOCK_TYPES","BlockStyleControls","selection","getSelection","getBlockForKey","getStartKey","INLINE_STYLES","InlineStyleControls","currentStyle","getCurrentInlineStyle","has","NotesPreview","listItemStyle","background","previewStyle","tagsStyle","marginLeft","collectionStyle","borderRadius","writingMode","letterSpacing","fontWeight","individualNotes","gridTemplateColumns","marginBottom","notes","search","searchQuery","toLowerCase","n","blocks","el","text","generateSearchPreview","previewText","startIndex","indexOf","endIndex","previewLength","config","pre","highlight","post","generateTitle","filtered","allNotes","border","moment","updated","format","NotesSearch","onSearch","onClear","NotesFilter","handleDropdownClick","handleRadioSelect","handleCheckboxSelect","collectionsOpen","tagsOpen","collectionFilter","tagsFilter","collectionTagStyle","dropdownTitle","gridTemplateRows","overflow","faUserCircle","faPlus","data-toggle","data-target","aria-expanded","aria-controls","faCaretDown","faCaretRight","paddingLeft","SideBar","sidebarStyle","dataTarget","isExpanded","selectedTags","newTags","splice","filteredNotes","forEach","Set","lowerTags","combinedTags","NOTES","depth","inlineStyleRanges","entityRanges","offset","entityMap","preview","COLLECTIONS","Notes","handleSearch","query","handleClear","newNote","existingIndex","findIndex","history","replace","match","params","EditorState","createEmpty","errors","createWithContent","convertFromRaw","App","Fragment","path","component","from","exact","ReactDOM","render","document","getElementById"],"mappings":"+GAAAA,EAAOC,QAAU,CACfC,OAAQ,4BACRC,mBAAoB,K,iMCgBPC,EAfA,WACb,OACE,yBAAKC,UAAU,cACb,kBAAC,IAAD,CAAMA,UAAU,eAAeC,GAAG,KAAlC,WAGA,yBAAKD,UAAU,IACb,kBAAC,IAAD,CAASA,UAAU,cAAcC,GAAG,UAApC,Y,8nBCNR,IA8BeC,EA9BW,SAAC,GAA6C,IAA3CC,EAA0C,EAA1CA,SAAUC,EAAgC,EAAhCA,WAAYC,EAAoB,EAApBA,MAC7CC,EADiE,EAAbC,QACpC,GAChBC,EAASJ,EAAWK,eAAe,QACnCL,EAAWM,KACX,eAEAF,EAAOD,OAASD,IAAKE,EAASA,EAAOG,MAAM,EAAGL,GAAO,OAEzD,IAAMM,EAAY,CAChBC,MAAO,OACPC,UAAW,SACXC,OAAQ,UACRZ,YAGF,OACE,yBAAKE,MAAK,KAAOO,EAAP,GAAqBP,IAC7B,kBAAC,IAAD,CACEW,KAAMC,IACNZ,MAAO,CACLQ,MAAO,QACPK,YAAa,OACbC,UAAW,oBAGf,8BAAOX,K,ujBCgGEY,E,2MAtHbC,MAAQ,CACNC,uBAAuB,EACvBC,cAAe,I,EAGjBC,SAAW,SAAAC,GACT,EAAKC,SAAS,CAAEH,cAAeE,EAAME,OAAOC,S,EAG9CC,cAAgB,WACd,EAAKH,SAAS,CACZJ,uBAAwB,EAAKD,MAAMC,yB,EAIvCQ,uBAAyB,SAAAL,GACvB,IAAIf,EAAOe,EAAME,OAAOC,MADQ,EAEX,EAAKG,MAAMC,YAAYC,KAAK,SAAAC,GAAC,OAAIA,EAAExB,OAASA,IAA3DG,EAF0B,EAE1BA,MAAOsB,EAFmB,EAEnBA,IACPC,EAAI,KAAQ,EAAKL,MAAMM,cAC7BD,EAAKhC,WAAa,CAAE+B,MAAKzB,OAAMG,SAC/B,EAAKkB,MAAMO,KAAKF,I,EAGlBG,WAAa,SAAAd,GACX,GAAsB,KAAlBA,EAAMe,QAAV,CAEA,IAAIJ,EAAO,EAAKL,MAAMM,aAAX,KACF,EAAKN,MAAMM,cAChB,CACEF,IAAKM,KAAKC,MAAMC,WAChBC,MAAO,GACPC,QAASC,uBAAa,EAAKf,MAAMgB,YAAYC,qBAC7CC,KAAM,GACN7C,WAAY,IAGdgC,EAAKhC,WAAWM,OAAS,EAAKW,MAAME,gBAExCa,EAAKhC,WAAa,CAChB+B,IAAKM,KAAKC,MAAMC,WAChBjC,KAAM,EAAKW,MAAME,cACjBV,MC9CF,IACAqC,KAAKC,SACFR,SAAS,IACTS,QAAQ,ID6CX,EAAK1B,SAAS,CAAEH,cAAe,KAC/B,EAAKQ,MAAMO,KAAKF,M,wEAGR,IAAD,SAC+BiB,KAAKtB,MAAnCM,EADD,EACCA,aAAcL,EADf,EACeA,YAEtB,OACE,yBACE3B,MAAO,CAAEiD,UAAW,QAASC,QAAS,YACtCC,GAAG,0BACHxD,UAAU,qBAEV,kBAAC,EAAD,CACEG,SAAS,OACTC,WAAYiC,EAAeA,EAAajC,WAAa,KAEvD,kBAACqD,EAAA,EAAD,CACEC,UAAU,SACVC,OAAQN,KAAKhC,MAAMC,sBACnBK,OAAO,0BACPiC,QAAQ,SACRC,OAAQ,kBAAM,EAAKhC,kBAEnB,kBAACiC,EAAA,EAAD,2BACA,kBAACC,EAAA,EAAD,CAAaC,IAAK3B,EAAeA,EAAajC,WAAWM,KAAO,IAC7DsB,EACCA,EAAYiC,IAAI,SAAA/B,GAAC,OACf,yBAAKlC,UAAU,uBAAuBgE,IAAK9B,EAAEC,KAC3C,2BAAOnC,UAAU,oBACf,2BACEA,UAAU,mBACVkE,KAAK,QACLxD,KAAK,4BACLkB,MAAOM,EAAExB,KACTyD,UACE9B,GACIA,EAAajC,WAAWM,OAASwB,EAAExB,KAGzCc,SAAU,SAAA4C,GAAC,OAAI,EAAKtC,uBAAuBsC,MAE5ClC,EAAExB,SAKT,8BAEF,2BACEwD,KAAK,OACLlE,UAAU,eACV4B,MAAOyB,KAAKhC,MAAME,cAClBC,SAAU,SAAA4C,GAAC,OAAI,EAAK5C,SAAS4C,IAC7BC,YAAY,oBACZhE,MAAO,CACLF,SAAU,QACVmE,UAAW,OACXC,WAAY,IACZhB,QAAS,aACTiB,MAAO,QACPC,OAAQ,oBAEVC,UAAWrB,KAAKd,aAElB,+BACE,oDACO,W,GA/GWoC,a,mjBEFhC,IAwBeC,EAxBK,SAAC,GAAkD,IAAhDzE,EAA+C,EAA/CA,SAAU8C,EAAqC,EAArCA,KAAM5C,EAA+B,EAA/BA,MAAOE,EAAwB,EAAxBA,OAAQsE,EAAgB,EAAhBA,UAChDC,EAASvE,GAAU,GACnBwE,EAAU9B,EAAK1C,OAAS,EAAI0C,EAAK+B,KAAK,MAAQ,SAE9CD,EAAQxE,OAASuE,IAAQC,EAAUA,EAAQpE,MAAM,EAAGmE,GAAU,OAElE,IAAMlE,EAAY,CAChBC,MAAO,YACPC,UAAW,SACXC,OAAQ,UACRZ,YAGF,OACE,yBAAKE,MAAK,KAAOO,EAAP,GAAqBP,IAC7B,kBAAC,IAAD,CACEW,KAAMiE,IACN5E,MAAO,CAAEQ,MAAOgE,EAAW3D,YAAa,UAE1C,8BAAO6D,K,ujBCsFEG,E,2MArGb7D,MAAQ,CAAE8D,iBAAiB,EAAOC,OAAQ,I,EAE1CvD,cAAgB,WACd,EAAKH,SAAS,CAAEyD,iBAAkB,EAAK9D,MAAM8D,mB,EAG/CE,iBAAmB,SAAA5D,GACjB,IAAM6D,EAAM7D,EAAM8D,cAAcC,aAAa,QACzCpD,EAAI,KAAQ,EAAKL,MAAMM,cAC3BD,EAAKa,KAAOb,EAAKa,KAAKwC,OAAO,SAAAC,GAAC,OAAIA,IAAMJ,IACxC,EAAKvD,MAAMO,KAAKF,I,EAGlBZ,SAAW,SAAAC,GACT,EAAKC,SAAS,CAAE0D,OAAQ3D,EAAME,OAAOC,S,EAGvCW,WAAa,SAAAd,GACX,GAAsB,KAAlBA,EAAMe,QAAV,CAEA,IAAIJ,EAAO,EAAKL,MAAMM,aAAX,KACF,EAAKN,MAAMM,cAChB,CACEF,IAAKM,KAAKC,MAAMC,WAChBC,MAAO,GACPC,QAASC,uBAAa,EAAKf,MAAMgB,YAAYC,qBAC7CC,KAAM,GACN7C,WAAY,IAGdgC,EAAKa,KAAK0C,SAAS,EAAKtE,MAAM+D,UAElChD,EAAKa,KAAK2C,KAAK,EAAKvE,MAAM+D,QAC1B,EAAK1D,SAAS,CAAE0D,OAAQ,KACxB,EAAKrD,MAAMO,KAAKF,M,wEAGR,IAAD,OACCC,EAAiBgB,KAAKtB,MAAtBM,aAER,OACE,yBACEhC,MAAO,CAAEiD,UAAW,QAASC,QAAS,YACtCC,GAAG,qBAEH,kBAAC,EAAD,CACErD,SAAS,OACT8C,KAAMZ,EAAeA,EAAaY,KAAO,GACzC4B,UAAU,UAEZ,kBAACpB,EAAA,EAAD,CACEC,UAAU,SACVC,OAAQN,KAAKhC,MAAM8D,gBACnBxD,OAAO,oBACPiC,QAAQ,SACRC,OAAQ,kBAAM,EAAKhC,kBAEnB,kBAACiC,EAAA,EAAD,mBACA,kBAACC,EAAA,EAAD,CAAaC,IAAK3B,EAAeA,EAAaY,KAAK1C,OAAS,GACzD8B,EACCA,EAAaY,KAAKgB,IAAI,SAAAqB,GAAG,OACvB,yBAAKtB,IAAKsB,GACR,0BAAMO,KAAMP,EAAKQ,QAAS,SAAA1B,GAAC,OAAI,EAAKiB,iBAAiBjB,KACnD,kBAAC,IAAD,CACEpD,KAAM+E,IACN1F,MAAO,CAAEQ,MAAO,MAAOK,YAAa,WAGxC,2BAAOlB,UAAU,oBAAoBsF,MAIzC,8BAEF,2BACEpB,KAAK,OACLlE,UAAU,eACV4B,MAAOyB,KAAKhC,MAAM+D,OAClB5D,SAAU,SAAA4C,GAAC,OAAI,EAAK5C,SAAS4C,IAC7BC,YAAY,aACZhE,MAAO,CACLF,SAAU,QACVoE,WAAY,IACZhB,QAAS,aACTe,UAAW,OACXE,MAAO,QACPC,OAAQ,oBAEVC,UAAWrB,KAAKd,WAChByD,WAAS,IAEX,+BACE,2D,GA7FWrB,aCyEVsB,E,2MA1Eb5E,MAAQ,G,EAER6E,UAAY,CACVC,OAAQ,OACR3B,MAAO,OACPC,OAAQ,OACR2B,QAAS,cACTC,eAAgB,iB,EAGlBC,UAAY,CACVF,QAAS,cACTG,WAAY,SACZF,eAAgB,eAChB7B,MAAO,QACPC,OAAQ,OACRtE,SAAU,Q,EAGZqG,cAAgB,CACdJ,QAAS,cACTG,WAAY,SACZ9B,OAAQ,OACRtE,SAAU,Q,wEAGF,IAAD,EAOHkD,KAAKtB,MALPO,EAFK,EAELA,KACAmE,EAHK,EAGLA,aACApE,EAJK,EAILA,aACAL,EALK,EAKLA,YACAe,EANK,EAMLA,YAGF,OACE,yBAAK1C,MAAOgD,KAAK6C,WACf,yBAAK1C,GAAG,kBAAkBnD,MAAOgD,KAAKiD,WACpC,kBAAC,IAAD,CAAMrG,GAAG,cACP,yBAAKD,UAAU,gCACb,uBAAGA,UAAU,aAAa0G,cAAY,SACtC,6CAGJ,yBAAK1G,UAAU,+BAA+B8F,QAASW,GACrD,uBAAGzG,UAAU,cAAc0G,cAAY,SACvC,0CAEF,yBACE1G,UAAU,+BACV8F,QAAS,kBAAMxD,EAAKD,KAEpB,uBAAGrC,UAAU,iBAAiB0G,cAAY,SAC1C,yCAGJ,yBAAKlD,GAAG,kBAAkBnD,MAAOgD,KAAKmD,eACpC,kBAAC,EAAD,CACEnE,aAAcA,EACdL,YAAaA,EACbM,KAAMA,EACNS,YAAaA,IAEf,kBAAC,EAAD,CACEV,aAAcA,EACdC,KAAMA,EACNS,YAAaA,U,GAnEA4B,a,8OCEnBgC,E,YACJ,WAAY5E,GAAQ,IAAD,8BACjB,4CAAMA,KASR6E,YAAc,SAAAhE,GACZ,GAAI,EAAKb,MAAMM,aAAc,CAC3B,IAAMD,E,qVAAI,IAAQ,EAAKL,MAAMM,cAE7B,OADAD,EAAKQ,MAAQA,EACN,EAAKb,MAAM8E,mBAAmBzE,GAErC,IAAM0E,EAAuBhE,uBAC3B,EAAKf,MAAMgB,YAAYC,qBAEnBZ,EAAO,CACXD,IAAKM,KAAKC,MAAMC,WAChBC,MAAOA,EACPC,QAASiE,EACT7D,KAAM,GACN7C,WAAY,IAEd,OAAO,EAAK2B,MAAM8E,mBAAmBzE,IA1BtB,EAmDnB2E,cAAgB,CACdX,QAAS,cACTY,WAAY,+BACZ7G,SAAU,OACVgG,OAAQ,YAvDS,EA0DnBc,aAAe,CACbzC,MAAO,MACPC,OAAQ,OACRyC,YAAa,iBACbf,OAAQ,YA3DR,EAAKgB,MAAQ,kBAAM,EAAKC,OAAOD,SAE/B,EAAKE,iBAAmB,EAAKC,kBAAkBC,KAAvB,gBACxB,EAAKC,gBAAkB,EAAKC,iBAAiBF,KAAtB,gBACvB,EAAKG,kBAAoB,EAAKC,mBAAmBJ,KAAxB,gBAPR,E,+EA8BDK,EAAS7E,GACzB,IAAM8E,EAAWC,YAAUT,iBAAiBtE,EAAa6E,GACzD,QAAIC,IACFxE,KAAKtB,MAAMP,SAASqG,IACb,K,uCAKME,GACf1E,KAAKtB,MAAMP,SACTsG,YAAUN,gBAAgBnE,KAAKtB,MAAMgB,YAAagF,M,yCAInCC,GACjB3E,KAAKtB,MAAMP,SACTsG,YAAUJ,kBAAkBrE,KAAKtB,MAAMgB,YAAaiF,M,+BAkB9C,IAAD,OACP,OACE,yBAAKhI,UAAU,iBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEsC,KAAMe,KAAKtB,MAAMO,KACjBmE,aAAcpD,KAAKtB,MAAM0E,aACzBpE,aAAcgB,KAAKtB,MAAMM,aACzBL,YAAaqB,KAAKtB,MAAMC,YACxB6E,mBAAoBxD,KAAKtB,MAAM8E,mBAC/B9D,YAAaM,KAAKtB,MAAMgB,cAE1B,yBAAKS,GAAG,kBAAkBnD,MAAOgD,KAAK0D,eACpC,kBAAC,EAAD,CACEhE,YAAaM,KAAKtB,MAAMgB,YACxBkF,SAAU5E,KAAKqE,oBAEjB,yBAAKrH,MAAOgD,KAAK4D,eACjB,kBAAC,EAAD,CACElE,YAAaM,KAAKtB,MAAMgB,YACxBkF,SAAU5E,KAAKmE,kBAEjB,+BAGJ,yBAAKhE,GAAG,oBACN,6BACE,kBAAC,IAAD,CACExD,UAAU,WACVwD,GAAG,iBACHa,YAAY,WACZzC,MACEyB,KAAKtB,MAAMM,aAAegB,KAAKtB,MAAMM,aAAaO,MAAQ,GAE5DpB,SAAU,SAAA4C,GAAC,OAAI,EAAKwC,YAAYxC,EAAEzC,OAAOC,UAE3C,8BAEF,yBAAK5B,UAAU,cAAc8F,QAASzC,KAAK8D,OACzC,kBAAC,SAAD,CACEe,aAAcC,EACdC,eAAgBC,EAChBtF,YAAaM,KAAKtB,MAAMgB,YACxBsE,iBAAkBhE,KAAKgE,iBACvBiB,aAAcjF,KAAKkF,sBACnB/G,SAAU6B,KAAKtB,MAAMyG,eACrBC,IAAK,SAAAA,GAAG,OAAK,EAAKrB,OAASqB,GAC3BC,YAAY,W,GAjHAC,IAAMhE,WA2H1B0D,EAAW,CACfO,KAAM,CACJC,gBAAiB,sBACjB7B,WAAY,gDACZ7G,SAAU,GACVoD,QAAS,IAIb,SAAS4E,EAAcW,GACrB,OAAQA,EAAMC,WACZ,IAAK,aACH,MAAO,wBACT,IAAK,aACH,MAAO,cACT,QACE,OAAO,M,IAIPC,E,YACJ,WAAYjH,GAAQ,IAAD,8BACjB,4CAAMA,KACDkG,SAAW,SAAA7D,GACdA,EAAE6E,iBACFlH,EAAMkG,SAASlG,EAAM1B,QAJN,E,sEASjB,IAAIL,EAAY,qBAKhB,OAJIqD,KAAKtB,MAAMmH,SACblJ,GAAa,wBAIb,0BAAMA,UAAWA,EAAWmJ,YAAa9F,KAAK4E,UAC3C5E,KAAKtB,MAAMqH,W,GAjBMT,IAAMhE,WAuB1B0E,EAAc,CAClB,CAAED,MAAO,QAAS/I,MAAO,cACzB,CAAE+I,MAAO,SAAU/I,MAAO,gBAC1B,CACE+I,MAAO,uBAAGpJ,UAAU,gBAAgB0G,cAAY,SAChDrG,MAAO,uBAET,CACE+I,MAAO,uBAAGpJ,UAAU,gBAAgB0G,cAAY,SAChDrG,MAAO,qBAET,CACE+I,MAAO,uBAAGpJ,UAAU,aAAa0G,cAAY,SAC7CrG,MAAO,eAILiJ,EAAqB,SAAC,GAA+B,IAA7BvG,EAA4B,EAA5BA,YAAakF,EAAe,EAAfA,SACnCsB,EAAYxG,EAAYyG,eACxBzB,EAAYhF,EACfC,oBACAyG,eAAeF,EAAUG,eACzBX,UAEH,OACE,yBAAK/I,UAAU,sBACZqJ,EAAYpF,IAAI,SAAAC,GAAI,OACnB,kBAAC,EAAD,CACEF,IAAKE,EAAK7D,MACV6I,OAAQhF,EAAK7D,QAAU0H,EACvBqB,MAAOlF,EAAKkF,MACZnB,SAAUA,EACV5H,MAAO6D,EAAK7D,YAOlBsJ,EAAgB,CAClB,CAAEP,MAAO,uBAAGpJ,UAAU,aAAa0G,cAAY,SAAarG,MAAO,QACnE,CACE+I,MAAO,uBAAGpJ,UAAU,eAAe0G,cAAY,SAC/CrG,MAAO,UAET,CACE+I,MAAO,uBAAGpJ,UAAU,kBAAkB0G,cAAY,SAClDrG,MAAO,aAET,CAAE+I,MAAO,YAAa/I,MAAO,SAGzBuJ,EAAsB,SAAC,GAA+B,IAA7B7G,EAA4B,EAA5BA,YAAakF,EAAe,EAAfA,SACtC4B,EAAe9G,EAAY+G,wBAC/B,OACE,yBAAK9J,UAAU,sBACZ2J,EAAc1F,IAAI,SAAAC,GAAI,OACrB,kBAAC,EAAD,CACEF,IAAKE,EAAK7D,MACV6I,OAAQW,EAAaE,IAAI7F,EAAK7D,OAC9B+I,MAAOlF,EAAKkF,MACZnB,SAAUA,EACV5H,MAAO6D,EAAK7D,YAOPsG,I,mmBC9DAqD,G,YA7Kb,WAAYjI,GAAQ,IAAD,8BACjB,4CAAMA,KAIRkI,cAAgB,CACd1G,QAAS,eACT2G,WAAY,SAPK,EAUnBC,aAAe,CACbhK,SAAU,GACVgG,OAAQ,UACR5B,WAAY,MAbK,EAgBnB6F,UAAY,CACVjK,SAAU,GACVW,UAAW,SACXuJ,WAAY,MACZxJ,MAAO,aApBU,EAuBnByJ,gBAAkB,CAChBnE,OAAQ,kBACRoE,aAAc,cACdC,YAAa,cACblH,UAAW,SACXnD,SAAU,OACVsK,cAAe,QACfC,WAAY,OACZ5J,UAAW,WA/BM,EAkCnB6J,gBAAkB,CAChBvE,QAAS,OACTwE,oBAAqB,YACrBpG,MAAO,OACPjB,QAAS,MACTsH,aAAc,OAvCG,EA0CnBpF,OAAS,SAAAqF,GACP,IAAIC,EAAS,EAAKhJ,MAAMiJ,YAAYC,cAEpC,GAAIH,EACF,OAAOA,EAAMrF,OACX,SAAAyF,GAAC,OACCA,EAAErI,QAAQsI,OAAOlJ,KAAK,SAAAmJ,GAAE,OAAIA,EAAGC,KAAKJ,cAActF,SAASoF,MAC3DG,EAAEtI,MAAMqI,cAActF,SAASoF,MAjDpB,EAqDnBO,sBAAwB,SAAAlJ,GACtB,IAAI4I,EAAc,EAAKjJ,MAAMiJ,YAEzBO,EAAcnJ,EAAKS,QAAQsI,OAAOlH,IAAI,SAAAiH,GAAC,OAAIA,EAAEG,OAAMrG,KAAK,KACxDwG,EAAaD,EACdN,cACAQ,QAAQT,EAAYC,eAEvB,IAAoB,IAAhBO,EAAmB,OAAO,6BAAMD,GACpC,IAAIG,EAAWF,EAAaR,EAAYzK,OAGlCoL,EAAgBC,IAAO9L,mBAEzB+L,EAAMN,EAAY5K,MAAM,EAAG6K,GAC3BM,EAAYP,EAAY5K,MAAM6K,EAAYE,GAC1CK,EAAOR,EAAY5K,MAAM+K,GAS7B,OAPIH,EAAYhL,OAASoL,IACnBE,EAAItL,QAAUoL,EAAgBX,EAAYzK,OAAS,IACrDsL,EAAMA,EAAIlL,MAAMkL,EAAItL,OATN,KAUZwL,EAAKxL,OAASoL,EAAgBX,EAAYzK,OAASsL,EAAItL,SACzDwL,EAAOA,EAAKpL,MAAM,EAAGgL,EAAgBE,EAAItL,UAI3C,6BACE,8BAAOsL,GACP,0BAAMxL,MAAO,CAAEwI,gBAAiB,WAAaiD,GAC7C,8BAAOC,KAlFM,EAuFnBC,cAAgB,SAAA5J,GACd,IAAI4I,EAAc,EAAKjJ,MAAMiJ,YACzBpI,EAAQR,EAAKQ,MAEb4I,EAAa5I,EAAMqI,cAAcQ,QAAQT,EAAYC,eAEzD,IAAoB,IAAhBO,EAAmB,OAAO,6BAAM5I,GAEpC,IAAI8I,EAAWF,EAAaR,EAAYzK,OAEpCsL,EAAMjJ,EAAMjC,MAAM,EAAG6K,GACrBM,EAAYlJ,EAAMjC,MAAM6K,EAAYE,GACpCK,EAAOnJ,EAAMjC,MAAM+K,GAEvB,OACE,6BACE,8BAAOG,GACP,0BAAMxL,MAAO,CAAEwI,gBAAiB,WAAaiD,GAC7C,8BAAOC,KAvGX,EAAK1K,MAAQ,GAFI,E,sEA8GT,IAAD,OACH4K,EAAW5I,KAAKoC,OAAOpC,KAAKtB,MAAMmK,UAEtC,OACE,yBAAKlM,UAAU,8BACZiM,GACCA,EAAShI,IAAI,SAAAiH,GACX,OACE,yBACElL,UAAU,kBACVK,MAAK,KACA,EAAKsK,gBADL,CAEHT,WACE,EAAKnI,MAAMM,cACX6I,EAAE/I,MAAQ,EAAKJ,MAAMM,aAAaF,IAC9B+I,EAAE9K,WAAWS,MACb,QACNsL,OACE,EAAKpK,MAAMM,cACX6I,EAAE/I,MAAQ,EAAKJ,MAAMM,aAAaF,IADlC,qBAEkB+I,EAAE9K,WAAWS,OAC3B,SAERmD,IAAKkH,EAAE/I,KAEP,yBACE9B,MAAK,KACA,EAAKiK,gBADL,CAEHzB,gBAAiBqC,EAAE9K,WAAWS,SAGhC,8BAAOqK,EAAE9K,WAAWM,OAEtB,kBAAC,IAAD,CACEsD,IAAKkH,EAAE/I,IACPlC,GAAE,iBAAYiL,EAAE/I,KAChB9B,MAAO,EAAK4J,cACZjK,UAAU,0BAEV,6BACE,yBAAKA,UAAU,wCACb,wBAAIA,UAAU,QAAQ,EAAKgM,cAAcd,IACzC,+BAAQkB,IAAOlB,EAAEmB,SAASC,OAAO,eAEnC,yBAAKjM,MAAO,EAAK8J,cACd,EAAKmB,sBAAsBJ,IAE9B,kBAAC,EAAD,CACE/K,SAAS,OACT8C,KAAMiI,EAAEjI,KACR5C,MAAO,CAAEiE,UAAW,OACpBO,UAAU,4B,GAlKLF,aCmBZ4H,GAvBK,SAAC,GAAwC,IAAtCvB,EAAqC,EAArCA,YAAawB,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QAC5C,OACE,yBAAKzM,UAAU,oBACb,2BACEkE,KAAK,OACLlE,UAAU,eACV4B,MAAOoJ,EACPxJ,SAAU,SAAA4C,GAAC,OAAIoI,EAASpI,EAAEmB,cAAc3D,QACxCyC,YAAY,cAEd,yBAAKrE,UAAU,uBACb,0BACE8F,QAAS,kBAAM2G,KACfzM,UAAU,4BACVkE,KAAK,UAHP,YCwNOwI,GA1NK,SAAC,GAUd,IATLC,EASI,EATJA,oBACAC,EAQI,EARJA,kBACAC,EAOI,EAPJA,qBACAC,EAMI,EANJA,gBACAC,EAKI,EALJA,SACAC,EAII,EAJJA,iBACAC,EAGI,EAHJA,WACAjL,EAEI,EAFJA,YACAiB,EACI,EADJA,KAuCMiK,EAAqB,CACzB5I,UAAW,OACXzD,MAAO,QACPE,OAAQ,WAGJoM,EAAgB,CACpB/G,QAAS,OACTwE,oBAAqB,YACrBpG,MAAO,OACP+B,WAAY,YAGd,OACE,yBAAK/C,GAAG,gBAAgBnD,MAnDN,CAClB6J,WAAY,OACZ9D,QAAS,OACTgH,iBAAkB,wBAClBC,SAAU,OACV9J,QAAS,WACTkB,OAAQ,OACRD,MAAO,SA6CL,yBAAKhB,GAAG,kBAAkBnD,MA1CN,CACtB6J,WAAY,QACZzF,OAAQ,OACRD,MAAO,OACP3D,MAAO,QACPuF,QAAS,OACTG,WAAY,SACZF,eAAgB,SAChBkE,aAAc,SAmCV,yBAAKlK,MAhCiB,CAC1B+F,QAAS,OACTwE,oBAAqB,WACrBpG,MAAO,OACPzD,OAAQ,YA6BF,yBAAKV,MAAO,CAAE+F,QAAS,OAAQD,OAAQ,SACrC,kBAAC,IAAD,CAAiBnF,KAAMsM,OAGzB,yBAAKjN,MAAO,CAAEF,SAAU,SAAxB,4BAGJ,yBAAKqD,GAAG,iBAAiBnD,MAjCF,CACzBoE,OAAQ,OACRD,MAAO,OACP3D,MAAO,QACPuF,QAAS,OACTG,WAAY,WACZhD,QAAS,WA4BL,4BACEW,KAAK,SACLlE,UAAU,2BACVK,MAAO,CAAEoE,OAAQ,OAAQtE,SAAU,QACnCoD,QAAQ,OAER,kBAAC,IAAD,CAAiBvC,KAAMuM,MACvB,+CAGJ,yBAAK/J,GAAG,oBAAoBnD,MAAO6M,GACjC,yBAAKlN,UAAU,wBACb,yBACEK,MAAO8M,EACPrH,QAAS,SAAA1B,GAAC,OAAIuI,EAAoBvI,IAClCoJ,cAAY,WACZC,cAAY,eACZC,gBAAeZ,EACfa,gBAAc,eAEd,yBACEtN,MAAO,CACLoE,OAAQ,OACRD,MAAO,SAGT,kBAAC,IAAD,CACExD,KAAM8L,EAAkBc,IAAcC,IACtC7N,UAAU,qBAGd,6BACE,8CACA,0BAAMK,MAAO,CAAEyN,YAAa,SACzB,IACD,kBAAC,IAAD,CACE9M,KAAMC,IACNZ,MAAO,CAAEF,SAAU,OAAQgB,UAAW,wBAMhD,yBACEnB,UAAU,+BACVwD,GAAG,cACHnD,MAAO,CACLgK,WAAY,OACZlK,SAAU,OACVsE,OAAQ,MACR4I,SAAU,SAGZ,yBAAKrJ,IAAI,iBAAiBhE,UAAU,wBAClC,2BAAOA,UAAU,oBACf,2BACEA,UAAU,mBACVkE,KAAK,QACLxD,KAAK,qBACLkB,MAAM,GACNuC,QAA8B,KAArB6I,EACTxL,SAAU,SAAA4C,GAAC,OAAIwI,EAAkBxI,MAPrC,QAYDpC,EAAYiC,IAAI,SAAA/B,GAAC,OAChB,yBAAKlC,UAAU,aAAagE,IAAK9B,EAAEC,KACjC,2BAAOnC,UAAU,oBACf,2BACEA,UAAU,mBACVkE,KAAK,QACLxD,KAAK,qBACLkB,MAAOM,EAAExB,KACTyD,QAAS6I,IAAqB9K,EAAExB,KAChCc,SAAU,SAAA4C,GAAC,OAAIwI,EAAkBxI,MAElClC,EAAExB,WAMb,yBAAK8C,GAAG,cAAcnD,MAAO6M,GAC3B,yBAAKlN,UAAU,cACb,yBACEK,MAAO8M,EACPrH,QAAS,SAAA1B,GAAC,OAAIuI,EAAoBvI,IAClCoJ,cAAY,WACZC,cAAY,QACZC,gBAAc,QACdC,gBAAc,QAEd,yBACEtN,MAAO,CACLoE,OAAQ,OACRD,MAAO,SAGT,kBAAC,IAAD,CACExD,KAAM+L,EAAWa,IAAcC,IAC/B7N,UAAU,qBAGd,6BACE,uCACA,0BAAMK,MAAO,CAAEyN,YAAa,SACzB,IACD,kBAAC,IAAD,CAAiB9M,KAAMiE,IAAQ5E,MAAO,CAAEF,SAAU,cAK1D,yBACEH,UAAU,+BACVwD,GAAG,OACHnD,MAAO,CACLgK,WAAY,OACZlK,SAAU,OACVsE,OAAQ,MACR4I,SAAU,SAGXpK,EAAKgB,IAAI,SAAAqB,GAAG,OACX,yBAAKtF,UAAU,aAAagE,IAAKsB,GAC/B,2BAAOtF,UAAU,oBACf,2BACEA,UAAU,mBACVkE,KAAK,WACLxD,KAAK,cACL8C,GAAI8B,EACJ1D,MAAO0D,EACPnB,QAAS8I,IAAe,IAAMA,EAAWtH,SAASL,GAClD9D,SAAU,SAAA4C,GAAC,OAAIyI,EAAqBzI,MAErCkB,UCnEFyI,G,YAlJb,WAAYhM,GAAQ,IAAD,8BACjB,4CAAMA,KAaRiM,aAAe,CACb5H,QAAS,OACTwE,oBAAqB,aACrBzE,OAAQ,EACR+D,WAAY,SACZ1F,MAAO,OACPC,OAAQ,QAlBR,EAAKpD,MAAQ,CACXyL,iBAAiB,EACjBC,UAAU,EACVC,iBAAkB,GAClBC,WAAY,IAGd,EAAKJ,qBAAuB,EAAKA,qBAAqBtF,KAA1B,gBAC5B,EAAKqF,kBAAoB,EAAKA,kBAAkBrF,KAAvB,gBACzB,EAAKoF,oBAAsB,EAAKA,oBAAoBpF,KAAzB,gBAXV,E,iFAuBCnD,GAClB,IAAM6J,EAAa7J,EAAEmB,cAAcC,aAAa,eAC1C0I,EAAa9J,EAAEmB,cAAcC,aAAa,iBAEhD,OAAQyI,GACN,IAAK,eACgB,UAAfC,EACF7K,KAAK3B,SAAS,CAAEoL,iBAAiB,IAEjCzJ,KAAK3B,SAAS,CAAEoL,iBAAiB,IAEnC,MACF,IAAK,QACgB,UAAfoB,EACF7K,KAAK3B,SAAS,CAAEqL,UAAU,IAE1B1J,KAAK3B,SAAS,CAAEqL,UAAU,O,wCAQhBtL,GAChB4B,KAAK3B,SAAS,CACZsL,iBAAkBvL,EAAME,OAAOC,MAC/BqL,WAAY,O,2CAIKxL,GACnB,IAAI0M,EAAe9K,KAAKhC,MAAM4L,WAC1B3H,EAAM7D,EAAME,OAAOC,MAEvB,GAAIuM,EAAaxI,SAASL,GAAM,CAC9B,IAAI8I,EAAUD,EACdC,EAAQC,OAAOF,EAAa1C,QAAQnG,GAAM,GAC1CjC,KAAK3B,SAAS,CACZuL,WAAYmB,SAGd/K,KAAK3B,SAAS,CACZuL,WAAW,GAAD,mBAAM5J,KAAKhC,MAAM4L,YAAjB,CAA6B3H,Q,6BAKtCwF,GAAQ,IAAD,OACRwD,EAAgBxD,EAEhBzH,KAAKhC,MAAM2L,mBACbsB,EAAgBA,EAAc7I,OAC5B,SAAAyF,GAAC,OAAIA,EAAE9K,WAAWM,OAAS,EAAKW,MAAM2L,oBAG1C,IAAI/J,EAAO,GAIX,GAHAqL,EAAcC,QAAQ,SAAArD,GAAC,aAAI,EAAAjI,GAAK2C,KAAL,oBAAasF,EAAEjI,SAC1CA,EAAI,YAAO,IAAIuL,IAAIvL,IAEfI,KAAKhC,MAAM4L,WAAW1M,OAAS,EAAG,CACpC,IAAIkO,EAAYpL,KAAKhC,MAAM4L,WAAWhJ,IAAI,SAAAyB,GAAC,OAAIA,EAAEuF,gBAEjDqD,EAAgBA,EAAc7I,OAAO,SAAAyF,GACnC,IAAIwD,EAAY,sBAAOxD,EAAEjI,KAAKgB,IAAI,SAAAiH,GAAC,OAAIA,EAAED,iBAAzB,YAA4CwD,IAE5D,OADW,YAAO,IAAID,IAAIE,IACXnO,SAAWmO,EAAanO,SAI3C,MAAO,CAAE+N,gBAAerL,U,+BAGhB,IAAD,EAQHI,KAAKtB,MANPiJ,EAFK,EAELA,YACAkB,EAHK,EAGLA,SACA7J,EAJK,EAILA,aACAmK,EALK,EAKLA,SACAC,EANK,EAMLA,QACAzK,EAPK,EAOLA,YAGEiB,EAAO,GAEX,GAAIiJ,EAAU,CACZ,IAAIpB,EAAQzH,KAAKoC,OAAOyG,GACxBA,EAAWpB,EAAMwD,cACjBrL,EAAO6H,EAAM7H,KAGf,OACE,yBAAK5C,MAAOgD,KAAK2K,cACf,kBAAC,GAAD,CACErB,oBAAqBtJ,KAAKsJ,oBAC1BC,kBAAmBvJ,KAAKuJ,kBACxBC,qBAAsBxJ,KAAKwJ,qBAC3BC,gBAAiBzJ,KAAKhC,MAAMyL,gBAC5BC,SAAU1J,KAAKhC,MAAM0L,SACrBC,iBAAkB3J,KAAKhC,MAAM2L,iBAC7BC,WAAY5J,KAAKhC,MAAM4L,WACvBjL,YAAaA,EACbiB,KAAMA,EACNe,IAAKhC,EAAYzB,SAEnB,yBAAKP,UAAU,mBACb,kBAAC,GAAD,CACEwM,SAAUA,EACVxB,YAAaA,EACbyB,QAASA,IAEX,kBAAC,GAAD,CACEP,SAAUA,EACV7J,aAAcA,EACd2I,YAAaA,EACbhJ,YAAaA,U,GA3IH2C,aCLTgK,GAAQ,CACnB,CACExM,IAAK,mBACLS,MAAO,yBACPC,QAAS,CACPsI,OAAQ,CACN,CACEnH,IAAK,OACLqH,KAAM,sBACNnH,KAAM,WACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,GACNnH,KAAM,WACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,SACNnH,KAAM,eACN0K,MAAO,EACPC,kBAAmB,CACjB,CACEE,OAAQ,EACRxO,OAAQ,EACRF,MAAO,cAGXyO,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,iBACNnH,KAAM,sBACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,cACNnH,KAAM,sBACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,eACNnH,KAAM,sBACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,gBACNnH,KAAM,sBACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,IAER,CACE7B,IAAK,QACLqH,KAAM,cACNnH,KAAM,sBACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,KAGVmJ,UAAW,IAEbC,QACE,iFACFhM,KAAM,CAAC,WAAY,SAAU,cAC7B7C,WAAY,CACV+B,IAAK,cACLzB,KAAM,SACNG,MAAO,eAETwL,QAAS,4BAEX,CACElK,IAAK,sBACLS,MAAO,UACPC,QAAS,CACPsI,OAAQ,CACN,CACEnH,IAAK,QACLqH,KAAM,+CACNnH,KAAM,WACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,KAGVmJ,UAAW,IAEbC,QAAS,+CACThM,KAAM,CAAC,QAAS,WAChB7C,WAAY,CACV+B,IAAK,eACLzB,KAAM,QACNG,MAAO,QAETwL,QAAS,4BAEX,CACElK,IAAK,0BACLS,MAAO,qBACPC,QAAS,CACPsI,OAAQ,CACN,CACEnH,IAAK,OACLqH,KAAM,6CACNnH,KAAM,WACN0K,MAAO,EACPC,kBAAmB,GACnBC,aAAc,GACdjJ,KAAM,KAGVmJ,UAAW,IAEbC,QAAS,8CACThM,KAAM,CAAC,WAAY,mBACnB7C,WAAY,CACV+B,IAAK,gBACLzB,KAAM,QACNG,MAAO,aAETwL,QAAS,6BCnJN,IAAM6C,GAAc,CACzB,CACE/M,IAAK,eACLzB,KAAM,QACNG,MAAO,QAET,CACEsB,IAAK,cACLzB,KAAM,SACNG,MAAO,eAET,CACEsB,IAAK,gBACLzB,KAAM,QACNG,MAAO,c,IC6JIsO,G,YAlKb,WAAYpN,GAAQ,IAAD,8BACjB,4CAAMA,KA6DRqN,aAAe,SAAAC,GACb,EAAK3N,SAAS,CAAEsJ,YAAaqE,KA/DZ,EAkEnBC,YAAc,WACZ,EAAK5N,SAAS,CAAEsJ,YAAa,MAnEZ,EAsEnBnE,mBAAqB,SAAAzE,GACnB,EAAKV,SAAS,CAAEW,aAAcD,KAvEb,EA0EnBE,KAAO,SAAAD,GAAiB,IAAD,EACa,EAAKhB,MAA/B6K,EADa,EACbA,SAAUnJ,EADG,EACHA,YACZ+D,EAAuBhE,uBAAaC,EAAYC,qBAEhDuM,EAAU,CACdpN,IAAME,GAAgBA,EAAaF,KAAQM,KAAKC,MAAMC,WACtDC,MAAQP,GAAgBA,EAAaO,OAAU,GAC/CC,QAASiE,EACT7D,KAAOZ,GAAgBA,EAAaY,MAAS,GAC7C7C,WAAaiC,GAAgBA,EAAajC,YAAe,IAG3D,IACE,IAAMoP,EAAgBtD,EAASuD,UAAU,SAAAvE,GAAC,OAAIA,EAAE/I,MAAQE,EAAaF,OAC9C,IAAnBqN,GACFtD,EAASmC,OAAOmB,EAAe,EAAGD,GAClC,EAAK7N,SAAS,CAAEwK,WAAU7J,aAAckN,MAExCrD,EAAStG,KAAK2J,GACd,EAAK7N,SAAS,CAAEwK,WAAU7J,aAAckN,IACxC,EAAKxN,MAAM2N,QAAQC,QAAnB,iBAAqCJ,EAAQpN,OAE/C,SACA+J,EAAStG,KAAK2J,GACd,EAAK7N,SAAS,CAAEwK,WAAU7J,aAAckN,IACxC,EAAKxN,MAAM2N,QAAQC,QAAnB,iBAAqCJ,EAAQpN,MAG/C,GACEoN,EAAQnP,WAAW+B,KAEL,IADd,EAAKd,MAAMW,YAAYyD,OAAO,SAAAvD,GAAC,OAAIA,EAAEC,MAAQoN,EAAQnP,WAAW+B,MAC7D5B,OACH,CACA,IAAIyB,EAAc,EAAKX,MAAMW,YAC7BA,EAAY4D,KAAK2J,EAAQnP,YACzB,EAAKsB,SAAS,CAAEM,kBA7GD,EAiHnByE,aAAe,WACb,IAAIjD,EAAK,EAAKzB,MAAM6N,MAAMC,OAAOrM,GAEjC,EAAK9B,SAAS,CACZwK,SAAU,EAAK7K,MAAM6K,SAASzG,OAAO,SAAAyF,GAAC,OAAIA,EAAE/I,MAAQqB,IACpDT,YAAa+M,cAAYC,cACzB1N,aAAc,KACdO,MAAO,KAET,EAAKb,MAAM2N,QAAQC,QAAQ,WAxH3B,EAAKtO,MAAQ,CACX6K,SAAU,KACV8D,OAAQ,GACRjN,YAAa+M,cAAYC,cACzB1N,aAAc,KACd2I,YAAa,GACbhJ,YAAa,IAGf,EAAKwG,eAAiB,SAAAzF,GACpB,EAAKrB,SAAS,CAAEqB,iBAZD,E,iFAiBjB,IAAMS,EAAKH,KAAKtB,MAAM6N,MAAMC,OAAOrM,IAAM,KAEzC,IAAKA,IAAOmL,GACV,OAAOtL,KAAK3B,SAAS,CAAEwK,SAAUyC,GAAO3M,YAAakN,KAEvD,IAAM9M,EAAOuM,GAAM1M,KAAK,SAAAiJ,GAAC,OAAIA,EAAE/I,MAAQqB,KAAO,KACxCT,EAAcX,EAChB0N,cAAYG,kBAAkBC,yBAAe9N,EAAKS,UAClDiN,cAAYC,cAEhB1M,KAAK3B,SAAS,CACZwK,SAAUyC,GACV3M,YAAakN,GACb7M,aAAcD,EACdW,kB,2CAKF,IAAMS,EAAKH,KAAKtB,MAAM6N,MAAMC,OAAOrM,GAEnC,GAAKA,GAAOH,KAAKhC,MAAM6K,SAAvB,CAEA,GAAW,QAAP1I,EAMF,OALAH,KAAK3B,SAAS,CACZqB,YAAa+M,cAAYC,cACzB1N,aAAc,KACdO,MAAO,KAEFS,KAAKtB,MAAM2N,QAAQC,QAAQ,UAGpC,IAAMvN,EAAOiB,KAAKhC,MAAM6K,SAASjK,KAAK,SAAAiJ,GAAC,OAAIA,EAAE/I,MAAQqB,IACrD,IAAKpB,EAAM,OAAOiB,KAAKtB,MAAM2N,QAAQC,QAAQ,UAC7C,IAAM5M,EAAc+M,cAAYG,kBAC9BC,yBAAe9N,EAAKS,UAGtB,OAAIQ,KAAKhC,MAAMgB,cAAgBmB,IAAOH,KAAKhC,MAAMgB,aAAaF,IACrDkB,KAAK3B,SAAS,CAAEW,aAAcD,EAAMW,gBAExCM,KAAKhC,MAAMgB,kBAAhB,EACSgB,KAAK3B,SAAS,CAAEW,aAAcD,EAAMW,mB,+BAkErC,IAAD,EAQHM,KAAKhC,MANP0B,EAFK,EAELA,YACAmJ,EAHK,EAGLA,SACAlB,EAJK,EAILA,YACAhJ,EALK,EAKLA,YACAK,EANK,EAMLA,aACAO,EAPK,EAOLA,MAGF,OACE,yBAAK5C,UAAU,YACb,kBAAC,GAAD,CACE+C,YAAaA,EACbmJ,SAAUA,EACVM,SAAUnJ,KAAK+L,aACfpE,YAAaA,EACbyB,QAASpJ,KAAKiM,YACdtN,YAAaA,EACbK,aAAcA,IAEhB,kBAAC,EAAD,CACEmG,eAAgBnF,KAAKmF,eACrB5B,YAAavD,KAAKuD,YAClBhE,MAAOA,EACPN,KAAMe,KAAKf,KACXmE,aAAcpD,KAAKoD,aACnBI,mBAAoBxD,KAAKwD,mBACzB7E,YAAaA,EACbe,YAAaA,EACbV,aAAcA,S,GA5JJsC,aCoBLwL,I,mBArBb,WAAYpO,GAAQ,IAAD,8BACjB,4CAAMA,KACDV,MAAQ,GAFI,E,sEAMjB,OACE,kBAAC,IAAM+O,SAAP,KACE,kBAAC,EAAD,MACA,0BAAMpQ,UAAU,kBACd,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOqQ,KAAK,aAAaC,UAAWnB,KACpC,kBAAC,IAAD,CAAOkB,KAAK,SAASC,UAAWnB,KAChC,kBAAC,IAAD,CAAUoB,KAAK,IAAIC,OAAK,EAACvQ,GAAG,kB,GAdtB0E,c,qBCElB8L,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,GAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.441bdc73.chunk.js","sourcesContent":["module.exports = {\r\n  apiUrl: \"http://localhost:4000/api\",\r\n  notesPreviewLength: 75\r\n};\r\n","import React from \"react\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\n\r\nconst NavBar = () => {\r\n  return (\r\n    <nav className=\"app-navbar\">\r\n      <Link className=\"navbar-brand\" to=\"/\">\r\n        Notable\r\n      </Link>\r\n      <div className=\"\">\r\n        <NavLink className=\"navBar-link\" to=\"/login\">\r\n          Login\r\n        </NavLink>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBook } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst CollectionPreview = ({ fontSize, collection, style, length }) => {\r\n  let len = length || 20;\r\n  let colStr = collection.hasOwnProperty(\"name\")\r\n    ? collection.name\r\n    : \"(collection)\";\r\n\r\n  if (colStr.length > len) colStr = colStr.slice(0, len) + \"...\";\r\n\r\n  const linkStyle = {\r\n    color: \"blue\",\r\n    fontStyle: \"italic\",\r\n    cursor: \"pointer\",\r\n    fontSize\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...linkStyle, ...style }}>\r\n      <FontAwesomeIcon\r\n        icon={faBook}\r\n        style={{\r\n          color: \"black\",\r\n          marginRight: \"10px\",\r\n          transform: \"rotate(-20deg)\"\r\n        }}\r\n      />\r\n      <span>{colStr}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollectionPreview;\r\n","import React, { Component } from \"react\";\r\nimport { convertToRaw } from \"draft-js\";\r\nimport { UncontrolledPopover, PopoverBody, PopoverHeader } from \"reactstrap\";\r\nimport CollectionPreview from \"./common/CollectionPreview\";\r\nimport randomColor from \"./../utils/randomColor\";\r\n\r\nclass EditorCollections extends Component {\r\n  state = {\r\n    collectionPopoverOpen: false,\r\n    newCollection: \"\"\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ newCollection: event.target.value });\r\n  };\r\n\r\n  togglePopover = () => {\r\n    this.setState({\r\n      collectionPopoverOpen: !this.state.collectionPopoverOpen\r\n    });\r\n  };\r\n\r\n  handleCollectionSelect = event => {\r\n    let name = event.target.value;\r\n    let { color, _id } = this.props.collections.find(c => c.name === name);\r\n    const note = { ...this.props.selectedNote };\r\n    note.collection = { _id, name, color };\r\n    this.props.save(note);\r\n  };\r\n\r\n  pressEnter = event => {\r\n    if (event.keyCode !== 13) return;\r\n\r\n    let note = this.props.selectedNote\r\n      ? { ...this.props.selectedNote }\r\n      : {\r\n          _id: Date.now().toString(),\r\n          title: \"\",\r\n          content: convertToRaw(this.props.editorState.getCurrentContent()),\r\n          tags: [],\r\n          collection: {}\r\n        };\r\n    // don't allow duplicate collections\r\n    if (note.collection.name === this.state.newCollection) return;\r\n\r\n    note.collection = {\r\n      _id: Date.now().toString(),\r\n      name: this.state.newCollection,\r\n      color: randomColor()\r\n    };\r\n    this.setState({ newCollection: \"\" });\r\n    this.props.save(note);\r\n  };\r\n\r\n  render() {\r\n    const { selectedNote, collections } = this.props;\r\n\r\n    return (\r\n      <div\r\n        style={{ textAlign: \"right\", padding: \"0px 10px\" }}\r\n        id=\"collection-popover-link\"\r\n        className=\"link-no-underline\"\r\n      >\r\n        <CollectionPreview\r\n          fontSize=\"12px\"\r\n          collection={selectedNote ? selectedNote.collection : {}}\r\n        />\r\n        <UncontrolledPopover\r\n          placement=\"bottom\"\r\n          isOpen={this.state.collectionPopoverOpen}\r\n          target=\"collection-popover-link\"\r\n          trigger=\"legacy\"\r\n          toggle={() => this.togglePopover()}\r\n        >\r\n          <PopoverHeader>select collection:</PopoverHeader>\r\n          <PopoverBody key={selectedNote ? selectedNote.collection.name : \"\"}>\r\n            {collections ? (\r\n              collections.map(c => (\r\n                <div className=\"form-check clickable\" key={c._id}>\r\n                  <label className=\"form-check-label\">\r\n                    <input\r\n                      className=\"form-check-input\"\r\n                      type=\"radio\"\r\n                      name=\"select-collection-choices\"\r\n                      value={c.name}\r\n                      checked={\r\n                        selectedNote\r\n                          ? selectedNote.collection.name === c.name\r\n                          : false\r\n                      }\r\n                      onChange={e => this.handleCollectionSelect(e)}\r\n                    />\r\n                    {c.name}\r\n                  </label>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={this.state.newCollection}\r\n              onChange={e => this.onChange(e)}\r\n              placeholder=\"new collection...\"\r\n              style={{\r\n                fontSize: \".9rem\",\r\n                marginTop: \"10px\",\r\n                lineHeight: \"1\",\r\n                padding: \"0px .75rem\",\r\n                width: \"150px\",\r\n                height: \"calc(2rem + 2px)\"\r\n              }}\r\n              onKeyDown={this.pressEnter}\r\n            />\r\n            <small>\r\n              <em>press Enter to save</em>\r\n            </small>{\" \"}\r\n          </PopoverBody>\r\n        </UncontrolledPopover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorCollections;\r\n","export default function randomColor() {\r\n  return (\r\n    \"#\" +\r\n    Math.random()\r\n      .toString(16)\r\n      .substr(-6)\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTags } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst TagsPreview = ({ fontSize, tags, style, length, iconColor }) => {\r\n  let tagLen = length || 40;\r\n  let tagsStr = tags.length > 0 ? tags.join(\", \") : \"(tags)\";\r\n\r\n  if (tagsStr.length > tagLen) tagsStr = tagsStr.slice(0, tagLen) + \"...\";\r\n\r\n  const linkStyle = {\r\n    color: \"orangered\",\r\n    fontStyle: \"italic\",\r\n    cursor: \"pointer\",\r\n    fontSize\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...linkStyle, ...style }}>\r\n      <FontAwesomeIcon\r\n        icon={faTags}\r\n        style={{ color: iconColor, marginRight: \"10px\" }}\r\n      />\r\n      <span>{tagsStr}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagsPreview;\r\n","import React, { Component } from \"react\";\r\nimport { convertToRaw } from \"draft-js\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faMinusCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { UncontrolledPopover, PopoverBody, PopoverHeader } from \"reactstrap\";\r\nimport TagsPreview from \"./common/TagsPreview\";\r\n\r\nclass EditorTags extends Component {\r\n  state = { tagsPopoverOpen: false, newTag: \"\" };\r\n\r\n  togglePopover = () => {\r\n    this.setState({ tagsPopoverOpen: !this.state.tagsPopoverOpen });\r\n  };\r\n\r\n  handleTagsDelete = event => {\r\n    const tag = event.currentTarget.getAttribute(\"data\");\r\n    let note = { ...this.props.selectedNote };\r\n    note.tags = note.tags.filter(t => t !== tag);\r\n    this.props.save(note);\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ newTag: event.target.value });\r\n  };\r\n\r\n  pressEnter = event => {\r\n    if (event.keyCode !== 13) return;\r\n\r\n    let note = this.props.selectedNote\r\n      ? { ...this.props.selectedNote }\r\n      : {\r\n          _id: Date.now().toString(),\r\n          title: \"\",\r\n          content: convertToRaw(this.props.editorState.getCurrentContent()),\r\n          tags: [],\r\n          collection: {}\r\n        };\r\n    // don't allow duplicate tags\r\n    if (note.tags.includes(this.state.newTag)) return;\r\n\r\n    note.tags.push(this.state.newTag);\r\n    this.setState({ newTag: \"\" });\r\n    this.props.save(note);\r\n  };\r\n\r\n  render() {\r\n    const { selectedNote } = this.props;\r\n\r\n    return (\r\n      <div\r\n        style={{ textAlign: \"right\", padding: \"0px 10px\" }}\r\n        id=\"tags-popover-link\"\r\n      >\r\n        <TagsPreview\r\n          fontSize=\"12px\"\r\n          tags={selectedNote ? selectedNote.tags : {}}\r\n          iconColor=\"black\"\r\n        />\r\n        <UncontrolledPopover\r\n          placement=\"bottom\"\r\n          isOpen={this.state.tagsPopoverOpen}\r\n          target=\"tags-popover-link\"\r\n          trigger=\"legacy\"\r\n          toggle={() => this.togglePopover()}\r\n        >\r\n          <PopoverHeader>edit tags:</PopoverHeader>\r\n          <PopoverBody key={selectedNote ? selectedNote.tags.length : 0}>\r\n            {selectedNote ? (\r\n              selectedNote.tags.map(tag => (\r\n                <div key={tag}>\r\n                  <span data={tag} onClick={e => this.handleTagsDelete(e)}>\r\n                    <FontAwesomeIcon\r\n                      icon={faMinusCircle}\r\n                      style={{ color: \"red\", marginRight: \"10px\" }}\r\n                    />\r\n                  </span>\r\n                  <label className=\"form-check-label\">{tag}</label>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={this.state.newTag}\r\n              onChange={e => this.onChange(e)}\r\n              placeholder=\"new tag...\"\r\n              style={{\r\n                fontSize: \".9rem\",\r\n                lineHeight: \"1\",\r\n                padding: \"0px .75rem\",\r\n                marginTop: \"10px\",\r\n                width: \"150px\",\r\n                height: \"calc(2rem + 2px)\"\r\n              }}\r\n              onKeyDown={this.pressEnter}\r\n              autoFocus\r\n            />\r\n            <small>\r\n              <em>press Enter to save</em>\r\n            </small>\r\n          </PopoverBody>\r\n        </UncontrolledPopover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorTags;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport EditorCollections from \"./EditorCollections\";\r\nimport EditorTags from \"./EditorTags\";\r\n\r\nclass EditorMenu extends Component {\r\n  state = {};\r\n\r\n  menuStyle = {\r\n    margin: \"auto\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    display: \"inline-flex\",\r\n    justifyContent: \"space-between\"\r\n  };\r\n\r\n  crudStyle = {\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-around\",\r\n    width: \"200px\",\r\n    height: \"100%\",\r\n    fontSize: \"12px\"\r\n  };\r\n\r\n  metaDataStyle = {\r\n    display: \"inline-flex\",\r\n    alignItems: \"center\",\r\n    height: \"100%\",\r\n    fontSize: \"12px\"\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      save,\r\n      handleDelete,\r\n      selectedNote,\r\n      collections,\r\n      editorState\r\n    } = this.props;\r\n\r\n    return (\r\n      <div style={this.menuStyle}>\r\n        <div id=\"crud-operations\" style={this.crudStyle}>\r\n          <Link to=\"/notes/new\">\r\n            <div className=\"clickable editor-menu-option\">\r\n              <i className=\"fa fa-plus\" aria-hidden=\"true\" />\r\n              <span> New Note</span>\r\n            </div>\r\n          </Link>\r\n          <div className=\"clickable editor-menu-option\" onClick={handleDelete}>\r\n            <i className=\"fa fa-trash\" aria-hidden=\"true\" />\r\n            <span> Delete</span>\r\n          </div>\r\n          <div\r\n            className=\"clickable editor-menu-option\"\r\n            onClick={() => save(selectedNote)}\r\n          >\r\n            <i className=\"fa fa-floppy-o\" aria-hidden=\"true\" />\r\n            <span> Save</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"notes-meta-data\" style={this.metaDataStyle}>\r\n          <EditorCollections\r\n            selectedNote={selectedNote}\r\n            collections={collections}\r\n            save={save}\r\n            editorState={editorState}\r\n          />\r\n          <EditorTags\r\n            selectedNote={selectedNote}\r\n            save={save}\r\n            editorState={editorState}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditorMenu;\r\n","import React from \"react\";\r\nimport { Editor, RichUtils, convertToRaw } from \"draft-js\";\r\nimport Textarea from \"react-expanding-textarea\";\r\nimport EditorMenu from \"./EditorMenu\";\r\nimport \"../css/notes.css\";\r\nimport \"draft-js/dist/Draft.css\";\r\n\r\nclass DraftEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.focus = () => this.editor.focus();\r\n\r\n    this.handleKeyCommand = this._handleKeyCommand.bind(this);\r\n    this.toggleBlockType = this._toggleBlockType.bind(this);\r\n    this.toggleInlineStyle = this._toggleInlineStyle.bind(this);\r\n  }\r\n\r\n  handleTitle = title => {\r\n    if (this.props.selectedNote) {\r\n      const note = { ...this.props.selectedNote };\r\n      note.title = title;\r\n      return this.props.updateSelectedNote(note);\r\n    } else {\r\n      const currentEditorContent = convertToRaw(\r\n        this.props.editorState.getCurrentContent()\r\n      );\r\n      const note = {\r\n        _id: Date.now().toString(),\r\n        title: title,\r\n        content: currentEditorContent,\r\n        tags: [],\r\n        collection: {}\r\n      };\r\n      return this.props.updateSelectedNote(note);\r\n    }\r\n  };\r\n\r\n  _handleKeyCommand(command, editorState) {\r\n    const newState = RichUtils.handleKeyCommand(editorState, command);\r\n    if (newState) {\r\n      this.props.onChange(newState);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _toggleBlockType(blockType) {\r\n    this.props.onChange(\r\n      RichUtils.toggleBlockType(this.props.editorState, blockType)\r\n    );\r\n  }\r\n\r\n  _toggleInlineStyle(inlineStyle) {\r\n    this.props.onChange(\r\n      RichUtils.toggleInlineStyle(this.props.editorState, inlineStyle)\r\n    );\r\n  }\r\n\r\n  controlsStyle = {\r\n    display: \"inline-flex\",\r\n    fontFamily: \"Arial, Helvetica, sans-serif\",\r\n    fontSize: \"14px\",\r\n    margin: \"auto 0px\"\r\n  };\r\n\r\n  verticalLine = {\r\n    width: \"1px\",\r\n    height: \"20px\",\r\n    borderRight: \"1px solid grey\",\r\n    margin: \"auto 5px\"\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"editor-window\">\r\n        <div className=\"editor-menu\">\r\n          <EditorMenu\r\n            save={this.props.save}\r\n            handleDelete={this.props.handleDelete}\r\n            selectedNote={this.props.selectedNote}\r\n            collections={this.props.collections}\r\n            updateSelectedNote={this.props.updateSelectedNote}\r\n            editorState={this.props.editorState}\r\n          />\r\n          <div id=\"stying-controls\" style={this.controlsStyle}>\r\n            <InlineStyleControls\r\n              editorState={this.props.editorState}\r\n              onToggle={this.toggleInlineStyle}\r\n            />\r\n            <div style={this.verticalLine}></div>\r\n            <BlockStyleControls\r\n              editorState={this.props.editorState}\r\n              onToggle={this.toggleBlockType}\r\n            />\r\n            <hr></hr>\r\n          </div>\r\n        </div>\r\n        <div id=\"rich-text-editor\">\r\n          <div>\r\n            <Textarea\r\n              className=\"textarea\"\r\n              id=\"title-textarea\"\r\n              placeholder=\"Title...\"\r\n              value={\r\n                this.props.selectedNote ? this.props.selectedNote.title : \"\"\r\n              }\r\n              onChange={e => this.handleTitle(e.target.value)}\r\n            />\r\n            <hr></hr>\r\n          </div>\r\n          <div className=\"editor-edit\" onClick={this.focus}>\r\n            <Editor\r\n              blockStyleFn={getBlockStyle}\r\n              customStyleMap={styleMap}\r\n              editorState={this.props.editorState}\r\n              handleKeyCommand={this.handleKeyCommand}\r\n              keyBindingFn={this.mapKeyToEditorCommand}\r\n              onChange={this.props.onEditorChange}\r\n              ref={ref => (this.editor = ref)}\r\n              spellCheck={true}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Custom overrides for \"code\" style.\r\nconst styleMap = {\r\n  CODE: {\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\r\n    fontSize: 16,\r\n    padding: 2\r\n  }\r\n};\r\n\r\nfunction getBlockStyle(block) {\r\n  switch (block.getType()) {\r\n    case \"blockquote\":\r\n      return \"RichEditor-blockquote\";\r\n    case \"code-block\":\r\n      return \"editor-code\";\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nclass StyleButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onToggle = e => {\r\n      e.preventDefault();\r\n      props.onToggle(props.style);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let className = \"editor-styleButton\";\r\n    if (this.props.active) {\r\n      className += \" editor-activeButton\";\r\n    }\r\n\r\n    return (\r\n      <span className={className} onMouseDown={this.onToggle}>\r\n        {this.props.label}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nconst BLOCK_TYPES = [\r\n  { label: \"Title\", style: \"header-one\" },\r\n  { label: \"Header\", style: \"header-three\" },\r\n  {\r\n    label: <i className=\"fa fa-list-ul\" aria-hidden=\"true\"></i>,\r\n    style: \"unordered-list-item\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-list-ol\" aria-hidden=\"true\"></i>,\r\n    style: \"ordered-list-item\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-code\" aria-hidden=\"true\"></i>,\r\n    style: \"code-block\"\r\n  }\r\n];\r\n\r\nconst BlockStyleControls = ({ editorState, onToggle }) => {\r\n  const selection = editorState.getSelection();\r\n  const blockType = editorState\r\n    .getCurrentContent()\r\n    .getBlockForKey(selection.getStartKey())\r\n    .getType();\r\n\r\n  return (\r\n    <div className=\"editor-control-row\">\r\n      {BLOCK_TYPES.map(type => (\r\n        <StyleButton\r\n          key={type.style}\r\n          active={type.style === blockType}\r\n          label={type.label}\r\n          onToggle={onToggle}\r\n          style={type.style}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nvar INLINE_STYLES = [\r\n  { label: <i className=\"fa fa-bold\" aria-hidden=\"true\"></i>, style: \"BOLD\" },\r\n  {\r\n    label: <i className=\"fa fa-italic\" aria-hidden=\"true\"></i>,\r\n    style: \"ITALIC\"\r\n  },\r\n  {\r\n    label: <i className=\"fa fa-underline\" aria-hidden=\"true\"></i>,\r\n    style: \"UNDERLINE\"\r\n  },\r\n  { label: \"Monospace\", style: \"CODE\" }\r\n];\r\n\r\nconst InlineStyleControls = ({ editorState, onToggle }) => {\r\n  var currentStyle = editorState.getCurrentInlineStyle();\r\n  return (\r\n    <div className=\"editor-control-row\">\r\n      {INLINE_STYLES.map(type => (\r\n        <StyleButton\r\n          key={type.style}\r\n          active={currentStyle.has(type.style)}\r\n          label={type.label}\r\n          onToggle={onToggle}\r\n          style={type.style}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraftEditor;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport TagsPreview from \"./common/TagsPreview\";\r\nimport config from \"../config\";\r\n\r\nclass NotesPreview extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  listItemStyle = {\r\n    padding: \"0.5em 0.75em\",\r\n    background: \"white\"\r\n  };\r\n\r\n  previewStyle = {\r\n    fontSize: 12,\r\n    margin: \"3px 0px\",\r\n    lineHeight: 1.25\r\n  };\r\n\r\n  tagsStyle = {\r\n    fontSize: 11,\r\n    fontStyle: \"italic\",\r\n    marginLeft: \"5px\",\r\n    color: \"orangered\"\r\n  };\r\n\r\n  collectionStyle = {\r\n    margin: \"5px 5px 5px 0px\",\r\n    borderRadius: \"0 8px 8px 0\",\r\n    writingMode: \"vertical-rl\",\r\n    textAlign: \"center\",\r\n    fontSize: \"11px\",\r\n    letterSpacing: \"0.5px\",\r\n    fontWeight: \"bold\",\r\n    fontStyle: \"oblique\"\r\n  };\r\n\r\n  individualNotes = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"20px auto\",\r\n    width: \"100%\",\r\n    padding: \"1px\",\r\n    marginBottom: \"0px\"\r\n  };\r\n\r\n  filter = notes => {\r\n    let search = this.props.searchQuery.toLowerCase();\r\n\r\n    if (notes)\r\n      return notes.filter(\r\n        n =>\r\n          n.content.blocks.find(el => el.text.toLowerCase().includes(search)) ||\r\n          n.title.toLowerCase().includes(search)\r\n      );\r\n  };\r\n\r\n  generateSearchPreview = note => {\r\n    let searchQuery = this.props.searchQuery;\r\n\r\n    let previewText = note.content.blocks.map(n => n.text).join(\" \");\r\n    let startIndex = previewText\r\n      .toLowerCase()\r\n      .indexOf(searchQuery.toLowerCase());\r\n\r\n    if (startIndex === -1) return <div>{previewText}</div>;\r\n    let endIndex = startIndex + searchQuery.length;\r\n\r\n    const preLength = 20;\r\n    const previewLength = config.notesPreviewLength;\r\n\r\n    let pre = previewText.slice(0, startIndex);\r\n    let highlight = previewText.slice(startIndex, endIndex);\r\n    let post = previewText.slice(endIndex);\r\n\r\n    if (previewText.length > previewLength) {\r\n      if (pre.length >= previewLength + searchQuery.length + 3)\r\n        pre = pre.slice(pre.length - preLength);\r\n      if (post.length > previewLength - searchQuery.length - pre.length)\r\n        post = post.slice(0, previewLength - pre.length);\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <span>{pre}</span>\r\n        <span style={{ backgroundColor: \"yellow\" }}>{highlight}</span>\r\n        <span>{post}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  generateTitle = note => {\r\n    let searchQuery = this.props.searchQuery;\r\n    let title = note.title;\r\n\r\n    let startIndex = title.toLowerCase().indexOf(searchQuery.toLowerCase());\r\n\r\n    if (startIndex === -1) return <div>{title}</div>;\r\n\r\n    let endIndex = startIndex + searchQuery.length;\r\n\r\n    let pre = title.slice(0, startIndex);\r\n    let highlight = title.slice(startIndex, endIndex);\r\n    let post = title.slice(endIndex);\r\n\r\n    return (\r\n      <div>\r\n        <span>{pre}</span>\r\n        <span style={{ backgroundColor: \"yellow\" }}>{highlight}</span>\r\n        <span>{post}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    let filtered = this.filter(this.props.allNotes);\r\n\r\n    return (\r\n      <div className=\"list-group preview-section\">\r\n        {filtered &&\r\n          filtered.map(n => {\r\n            return (\r\n              <div\r\n                className=\"list-group-item\"\r\n                style={{\r\n                  ...this.individualNotes,\r\n                  background:\r\n                    this.props.selectedNote &&\r\n                    n._id === this.props.selectedNote._id\r\n                      ? n.collection.color\r\n                      : \"white\",\r\n                  border:\r\n                    this.props.selectedNote &&\r\n                    n._id === this.props.selectedNote._id\r\n                      ? `1px dotted ${n.collection.color}`\r\n                      : \"none\"\r\n                }}\r\n                key={n._id}\r\n              >\r\n                <div\r\n                  style={{\r\n                    ...this.collectionStyle,\r\n                    backgroundColor: n.collection.color\r\n                  }}\r\n                >\r\n                  <span>{n.collection.name}</span>\r\n                </div>\r\n                <Link\r\n                  key={n._id}\r\n                  to={`/notes/${n._id}`}\r\n                  style={this.listItemStyle}\r\n                  className=\"list-group-item-action\"\r\n                >\r\n                  <div>\r\n                    <div className=\"d-flex w-100 justify-content-between\">\r\n                      <h5 className=\"mb-1\">{this.generateTitle(n)}</h5>\r\n                      <small>{moment(n.updated).format(\"MMM D 'YY\")}</small>\r\n                    </div>\r\n                    <div style={this.previewStyle}>\r\n                      {this.generateSearchPreview(n)}\r\n                    </div>\r\n                    <TagsPreview\r\n                      fontSize=\"11px\"\r\n                      tags={n.tags}\r\n                      style={{ marginTop: \"5px\" }}\r\n                      iconColor=\"darkslateblue\"\r\n                    />\r\n                  </div>\r\n                </Link>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotesPreview;\r\n","import React from \"react\";\r\n\r\nconst NotesSearch = ({ searchQuery, onSearch, onClear }) => {\r\n  return (\r\n    <div className=\"input-group mb-3\">\r\n      <input\r\n        type=\"text\"\r\n        className=\"form-control\"\r\n        value={searchQuery}\r\n        onChange={e => onSearch(e.currentTarget.value)}\r\n        placeholder=\"Search...\"\r\n      />\r\n      <div className=\"input-group-prepend\">\r\n        <span\r\n          onClick={() => onClear()}\r\n          className=\"btn btn-outline-secondary\"\r\n          type=\"button\"\r\n        >\r\n          clear\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotesSearch;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faPlus,\r\n  faCaretRight,\r\n  faCaretDown,\r\n  faUserCircle,\r\n  faBook,\r\n  faTags\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst NotesFilter = ({\r\n  handleDropdownClick,\r\n  handleRadioSelect,\r\n  handleCheckboxSelect,\r\n  collectionsOpen,\r\n  tagsOpen,\r\n  collectionFilter,\r\n  tagsFilter,\r\n  collections,\r\n  tags\r\n}) => {\r\n  const filterStyle = {\r\n    background: \"#112\",\r\n    display: \"grid\",\r\n    gridTemplateRows: \"40px 60px 200px 300px\",\r\n    overflow: \"auto\",\r\n    padding: \"15px 5px\",\r\n    height: \"100%\",\r\n    width: \"100%\"\r\n  };\r\n\r\n  const profileDivStyle = {\r\n    background: \"black\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    color: \"white\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    borderRadius: \"10px\"\r\n  };\r\n\r\n  const profileContentStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"20% auto\",\r\n    width: \"100%\",\r\n    cursor: \"pointer\"\r\n  };\r\n\r\n  const buttonSectionStyle = {\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    color: \"white\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-end\",\r\n    padding: \"0 10px\"\r\n  };\r\n\r\n  const collectionTagStyle = {\r\n    marginTop: \"10px\",\r\n    color: \"white\",\r\n    cursor: \"pointer\"\r\n  };\r\n\r\n  const dropdownTitle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"15px auto\",\r\n    width: \"100%\",\r\n    alignItems: \"baseline\"\r\n  };\r\n\r\n  return (\r\n    <div id=\"filterSection\" style={filterStyle}>\r\n      <div id=\"profile-preview\" style={profileDivStyle}>\r\n        <div style={profileContentStyle}>\r\n          <div style={{ display: \"flex\", margin: \"auto\" }}>\r\n            <FontAwesomeIcon icon={faUserCircle} />\r\n          </div>\r\n\r\n          <div style={{ fontSize: \"11px\" }}>lords.austin@gmail.com</div>\r\n        </div>\r\n      </div>\r\n      <div id=\"add-collection\" style={buttonSectionStyle}>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-secondary btn-sm\"\r\n          style={{ height: \"25px\", fontSize: \"11px\" }}\r\n          padding=\"2px\"\r\n        >\r\n          <FontAwesomeIcon icon={faPlus} />\r\n          <span> Collection</span>\r\n        </button>\r\n      </div>\r\n      <div id=\"collection-filter\" style={collectionTagStyle}>\r\n        <div className=\"list-group clickable\">\r\n          <div\r\n            style={dropdownTitle}\r\n            onClick={e => handleDropdownClick(e)}\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#collections\"\r\n            aria-expanded={collectionsOpen}\r\n            aria-controls=\"collections\"\r\n          >\r\n            <div\r\n              style={{\r\n                height: \"100%\",\r\n                width: \"100%\"\r\n              }}\r\n            >\r\n              <FontAwesomeIcon\r\n                icon={collectionsOpen ? faCaretDown : faCaretRight}\r\n                className=\"faCaretDropdown\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <span>Collections </span>\r\n              <span style={{ paddingLeft: \"10px\" }}>\r\n                {\" \"}\r\n                <FontAwesomeIcon\r\n                  icon={faBook}\r\n                  style={{ fontSize: \"14px\", transform: \"rotate(-20deg)\" }}\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"collapse multi-collapse show\"\r\n          id=\"collections\"\r\n          style={{\r\n            marginLeft: \"10px\",\r\n            fontSize: \"14px\",\r\n            height: \"90%\",\r\n            overflow: \"auto\"\r\n          }}\r\n        >\r\n          <div key=\"allCollections\" className=\"form-check clickable\">\r\n            <label className=\"form-check-label\">\r\n              <input\r\n                className=\"form-check-input\"\r\n                type=\"radio\"\r\n                name=\"collection-choices\"\r\n                value=\"\"\r\n                checked={collectionFilter === \"\"}\r\n                onChange={e => handleRadioSelect(e)}\r\n              />\r\n              All\r\n            </label>\r\n          </div>\r\n          {collections.map(c => (\r\n            <div className=\"form-check\" key={c._id}>\r\n              <label className=\"form-check-label\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"radio\"\r\n                  name=\"collection-choices\"\r\n                  value={c.name}\r\n                  checked={collectionFilter === c.name}\r\n                  onChange={e => handleRadioSelect(e)}\r\n                />\r\n                {c.name}\r\n              </label>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div id=\"tags-filter\" style={collectionTagStyle}>\r\n        <div className=\"list-group\">\r\n          <div\r\n            style={dropdownTitle}\r\n            onClick={e => handleDropdownClick(e)}\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#tags\"\r\n            aria-expanded=\"false\"\r\n            aria-controls=\"tags\"\r\n          >\r\n            <div\r\n              style={{\r\n                height: \"100%\",\r\n                width: \"100%\"\r\n              }}\r\n            >\r\n              <FontAwesomeIcon\r\n                icon={tagsOpen ? faCaretDown : faCaretRight}\r\n                className=\"faCaretDropdown\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <span>Tags </span>\r\n              <span style={{ paddingLeft: \"10px\" }}>\r\n                {\" \"}\r\n                <FontAwesomeIcon icon={faTags} style={{ fontSize: \"12px\" }} />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"collapse multi-collapse show\"\r\n          id=\"tags\"\r\n          style={{\r\n            marginLeft: \"10px\",\r\n            fontSize: \"14px\",\r\n            height: \"90%\",\r\n            overflow: \"auto\"\r\n          }}\r\n        >\r\n          {tags.map(tag => (\r\n            <div className=\"form-check\" key={tag}>\r\n              <label className=\"form-check-label\">\r\n                <input\r\n                  className=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  name=\"tag-choices\"\r\n                  id={tag}\r\n                  value={tag}\r\n                  checked={tagsFilter !== [] && tagsFilter.includes(tag)}\r\n                  onChange={e => handleCheckboxSelect(e)}\r\n                />\r\n                {tag}\r\n              </label>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotesFilter;\r\n","import React, { Component } from \"react\";\r\nimport NotesPreview from \"./NotesPreview\";\r\nimport NotesSearch from \"./NotesSearch\";\r\nimport NotesFilter from \"./NotesFilter\";\r\n\r\nclass SideBar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      collectionsOpen: true,\r\n      tagsOpen: true,\r\n      collectionFilter: \"\",\r\n      tagsFilter: []\r\n    };\r\n\r\n    this.handleCheckboxSelect = this.handleCheckboxSelect.bind(this);\r\n    this.handleRadioSelect = this.handleRadioSelect.bind(this);\r\n    this.handleDropdownClick = this.handleDropdownClick.bind(this);\r\n  }\r\n\r\n  sidebarStyle = {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"200px auto\",\r\n    margin: 0,\r\n    background: \"salmon\",\r\n    width: \"100%\",\r\n    height: \"100%\"\r\n  };\r\n\r\n  handleDropdownClick(e) {\r\n    const dataTarget = e.currentTarget.getAttribute(\"data-target\");\r\n    const isExpanded = e.currentTarget.getAttribute(\"aria-expanded\");\r\n\r\n    switch (dataTarget) {\r\n      case \"#collections\":\r\n        if (isExpanded === \"false\") {\r\n          this.setState({ collectionsOpen: false });\r\n        } else {\r\n          this.setState({ collectionsOpen: true });\r\n        }\r\n        break;\r\n      case \"#tags\":\r\n        if (isExpanded === \"false\") {\r\n          this.setState({ tagsOpen: false });\r\n        } else {\r\n          this.setState({ tagsOpen: true });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  handleRadioSelect(event) {\r\n    this.setState({\r\n      collectionFilter: event.target.value,\r\n      tagsFilter: []\r\n    });\r\n  }\r\n\r\n  handleCheckboxSelect(event) {\r\n    let selectedTags = this.state.tagsFilter;\r\n    let tag = event.target.value;\r\n\r\n    if (selectedTags.includes(tag)) {\r\n      let newTags = selectedTags;\r\n      newTags.splice(selectedTags.indexOf(tag), 1);\r\n      this.setState({\r\n        tagsFilter: newTags\r\n      });\r\n    } else {\r\n      this.setState({\r\n        tagsFilter: [...this.state.tagsFilter, tag]\r\n      });\r\n    }\r\n  }\r\n\r\n  filter(notes) {\r\n    let filteredNotes = notes;\r\n\r\n    if (this.state.collectionFilter)\r\n      filteredNotes = filteredNotes.filter(\r\n        n => n.collection.name === this.state.collectionFilter\r\n      );\r\n\r\n    let tags = [];\r\n    filteredNotes.forEach(n => tags.push(...n.tags));\r\n    tags = [...new Set(tags)];\r\n\r\n    if (this.state.tagsFilter.length > 0) {\r\n      let lowerTags = this.state.tagsFilter.map(t => t.toLowerCase());\r\n\r\n      filteredNotes = filteredNotes.filter(n => {\r\n        let combinedTags = [...n.tags.map(n => n.toLowerCase()), ...lowerTags];\r\n        let setTags = [...new Set(combinedTags)];\r\n        return setTags.length !== combinedTags.length;\r\n      });\r\n    }\r\n\r\n    return { filteredNotes, tags };\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      searchQuery,\r\n      allNotes,\r\n      selectedNote,\r\n      onSearch,\r\n      onClear,\r\n      collections\r\n    } = this.props;\r\n\r\n    let tags = [];\r\n\r\n    if (allNotes) {\r\n      let notes = this.filter(allNotes);\r\n      allNotes = notes.filteredNotes;\r\n      tags = notes.tags;\r\n    }\r\n\r\n    return (\r\n      <div style={this.sidebarStyle}>\r\n        <NotesFilter\r\n          handleDropdownClick={this.handleDropdownClick}\r\n          handleRadioSelect={this.handleRadioSelect}\r\n          handleCheckboxSelect={this.handleCheckboxSelect}\r\n          collectionsOpen={this.state.collectionsOpen}\r\n          tagsOpen={this.state.tagsOpen}\r\n          collectionFilter={this.state.collectionFilter}\r\n          tagsFilter={this.state.tagsFilter}\r\n          collections={collections}\r\n          tags={tags}\r\n          key={collections.length}\r\n        />\r\n        <div className=\"sidebar-preview\">\r\n          <NotesSearch\r\n            onSearch={onSearch}\r\n            searchQuery={searchQuery}\r\n            onClear={onClear}\r\n          />\r\n          <NotesPreview\r\n            allNotes={allNotes}\r\n            selectedNote={selectedNote}\r\n            searchQuery={searchQuery}\r\n            collections={collections}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideBar;\r\n","export const NOTES = [\r\n  {\r\n    _id: \"fg0gr34hgioa98g4\",\r\n    title: \"Portland Trail Blazers\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"rhc1\",\r\n          text: \"Just some notes....\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"81bq5\",\r\n          text: \"\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"20eqn\",\r\n          text: \"Lineup\",\r\n          type: \"header-three\",\r\n          depth: 0,\r\n          inlineStyleRanges: [\r\n            {\r\n              offset: 0,\r\n              length: 6,\r\n              style: \"UNDERLINE\"\r\n            }\r\n          ],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"46tkh\",\r\n          text: \"Damian Lillard\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"aboo4\",\r\n          text: \"CJ McCollum\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"fupsb\",\r\n          text: \"Jusif Nurkic\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"c3u3r\",\r\n          text: \"Kent Bazemore\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        },\r\n        {\r\n          key: \"5cr5i\",\r\n          text: \"Rodney Hood\",\r\n          type: \"unordered-list-item\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    preview:\r\n      \"Just some notes....  Lineup Damian Lillard CJ McCollum Jusif Nurkic Kent Ba...\",\r\n    tags: [\"Portland\", \"Sports\", \"Basketball\"],\r\n    collection: {\r\n      _id: \"rht5wsbsgnw\",\r\n      name: \"Sports\",\r\n      color: \"greenyellow\"\r\n    },\r\n    updated: \"2019-07-11T04:05:42.426Z\"\r\n  },\r\n  {\r\n    _id: \"yh533g54yh5335y4gs4\",\r\n    title: \"Sapiens\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"6ef7d\",\r\n          text: \"Insert some book notes here. Nothing much...\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    preview: \"Insert some book notes here. Nothing much...\",\r\n    tags: [\"Books\", \"History\"],\r\n    collection: {\r\n      _id: \"adsfasdfadsf\",\r\n      name: \"Books\",\r\n      color: \"cyan\"\r\n    },\r\n    updated: \"2019-03-11T04:05:42.426Z\"\r\n  },\r\n  {\r\n    _id: \"thtrjsbehrytu5667s5335y\",\r\n    title: \"Sandy Ridge Trails\",\r\n    content: {\r\n      blocks: [\r\n        {\r\n          key: \"rhc1\",\r\n          text: \"Some of the best mountain biking in Oregon\",\r\n          type: \"unstyled\",\r\n          depth: 0,\r\n          inlineStyleRanges: [],\r\n          entityRanges: [],\r\n          data: {}\r\n        }\r\n      ],\r\n      entityMap: {}\r\n    },\r\n    preview: \"Some of the best mountain biking in Oregon.\",\r\n    tags: [\"Portland\", \"Mountain Biking\"],\r\n    collection: {\r\n      _id: \"nvcxcbvtsasdg\",\r\n      name: \"Other\",\r\n      color: \"lightgray\"\r\n    },\r\n    updated: \"2019-08-11T04:05:42.426Z\"\r\n  }\r\n];\r\n\r\nexport function getNote(id) {\r\n  return NOTES.find(n => n._id === id);\r\n}\r\n","export const COLLECTIONS = [\r\n  {\r\n    _id: \"adsfasdfadsf\",\r\n    name: \"Books\",\r\n    color: \"cyan\"\r\n  },\r\n  {\r\n    _id: \"rht5wsbsgnw\",\r\n    name: \"Sports\",\r\n    color: \"greenyellow\"\r\n  },\r\n  {\r\n    _id: \"nvcxcbvtsasdg\",\r\n    name: \"Other\",\r\n    color: \"lightgray\"\r\n  }\r\n];\r\n\r\nexport function getCollection(id) {\r\n  return COLLECTIONS.find(c => c._id === id);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DraftEditor from \"./DraftEditor\";\r\nimport { EditorState, convertToRaw, convertFromRaw } from \"draft-js\";\r\nimport SideBar from \"./SideBar\";\r\nimport { NOTES } from \"../services/fakePostsService\";\r\nimport { COLLECTIONS } from \"../services/fakeCollectionsService\";\r\nimport \"../css/notes.css\";\r\n\r\nclass Notes extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      allNotes: null,\r\n      errors: {},\r\n      editorState: EditorState.createEmpty(),\r\n      selectedNote: null,\r\n      searchQuery: \"\",\r\n      collections: []\r\n    };\r\n\r\n    this.onEditorChange = editorState => {\r\n      this.setState({ editorState });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id || null;\r\n\r\n    if (!id || !NOTES)\r\n      return this.setState({ allNotes: NOTES, collections: COLLECTIONS });\r\n\r\n    const note = NOTES.find(n => n._id === id) || null;\r\n    const editorState = note\r\n      ? EditorState.createWithContent(convertFromRaw(note.content))\r\n      : EditorState.createEmpty();\r\n\r\n    this.setState({\r\n      allNotes: NOTES,\r\n      collections: COLLECTIONS,\r\n      selectedNote: note,\r\n      editorState\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const id = this.props.match.params.id;\r\n\r\n    if (!id || !this.state.allNotes) return;\r\n\r\n    if (id === \"new\") {\r\n      this.setState({\r\n        editorState: EditorState.createEmpty(),\r\n        selectedNote: null,\r\n        title: \"\"\r\n      });\r\n      return this.props.history.replace(\"/notes\");\r\n    }\r\n\r\n    const note = this.state.allNotes.find(n => n._id === id);\r\n    if (!note) return this.props.history.replace(\"/notes\");\r\n    const editorState = EditorState.createWithContent(\r\n      convertFromRaw(note.content)\r\n    );\r\n\r\n    if (this.state.selectedNote && id !== this.state.selectedNote._id)\r\n      return this.setState({ selectedNote: note, editorState });\r\n\r\n    if (!this.state.selectedNote)\r\n      return this.setState({ selectedNote: note, editorState });\r\n  }\r\n\r\n  handleSearch = query => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  handleClear = () => {\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  updateSelectedNote = note => {\r\n    this.setState({ selectedNote: note });\r\n  };\r\n\r\n  save = selectedNote => {\r\n    const { allNotes, editorState } = this.state;\r\n    const currentEditorContent = convertToRaw(editorState.getCurrentContent());\r\n\r\n    const newNote = {\r\n      _id: (selectedNote && selectedNote._id) || Date.now().toString(),\r\n      title: (selectedNote && selectedNote.title) || \"\",\r\n      content: currentEditorContent,\r\n      tags: (selectedNote && selectedNote.tags) || [],\r\n      collection: (selectedNote && selectedNote.collection) || {}\r\n    };\r\n\r\n    try {\r\n      const existingIndex = allNotes.findIndex(n => n._id === selectedNote._id);\r\n      if (existingIndex !== -1) {\r\n        allNotes.splice(existingIndex, 1, newNote);\r\n        this.setState({ allNotes, selectedNote: newNote });\r\n      } else {\r\n        allNotes.push(newNote);\r\n        this.setState({ allNotes, selectedNote: newNote });\r\n        this.props.history.replace(`/notes/${newNote._id}`);\r\n      }\r\n    } catch {\r\n      allNotes.push(newNote);\r\n      this.setState({ allNotes, selectedNote: newNote });\r\n      this.props.history.replace(`/notes/${newNote._id}`);\r\n    }\r\n\r\n    if (\r\n      newNote.collection._id &&\r\n      this.state.collections.filter(c => c._id === newNote.collection._id)\r\n        .length === 0\r\n    ) {\r\n      let collections = this.state.collections;\r\n      collections.push(newNote.collection);\r\n      this.setState({ collections });\r\n    }\r\n  };\r\n\r\n  handleDelete = () => {\r\n    let id = this.props.match.params.id;\r\n\r\n    this.setState({\r\n      allNotes: this.state.allNotes.filter(n => n._id !== id),\r\n      editorState: EditorState.createEmpty(),\r\n      selectedNote: null,\r\n      title: \"\"\r\n    });\r\n    this.props.history.replace(\"/notes\");\r\n  };\r\n\r\n  render() {\r\n    let {\r\n      editorState,\r\n      allNotes,\r\n      searchQuery,\r\n      collections,\r\n      selectedNote,\r\n      title\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"app-page\">\r\n        <SideBar\r\n          editorState={editorState}\r\n          allNotes={allNotes}\r\n          onSearch={this.handleSearch}\r\n          searchQuery={searchQuery}\r\n          onClear={this.handleClear}\r\n          collections={collections}\r\n          selectedNote={selectedNote}\r\n        />\r\n        <DraftEditor\r\n          onEditorChange={this.onEditorChange}\r\n          handleTitle={this.handleTitle}\r\n          title={title}\r\n          save={this.save}\r\n          handleDelete={this.handleDelete}\r\n          updateSelectedNote={this.updateSelectedNote}\r\n          collections={collections}\r\n          editorState={editorState}\r\n          selectedNote={selectedNote}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Notes;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\nimport NavBar from \"./components/NavBar\";\r\nimport Notes from \"./components/Notes\";\r\nimport \"./css/App.css\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <NavBar />\r\n        <main className=\"app-background\">\r\n          <Switch>\r\n            <Route path=\"/notes/:id\" component={Notes} />\r\n            <Route path=\"/notes\" component={Notes} />\r\n            <Redirect from=\"/\" exact to=\"/notes\" />\r\n          </Switch>\r\n        </main>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"bootstrap/js/dist/collapse\";\r\nimport \"font-awesome/css/font-awesome.css\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}